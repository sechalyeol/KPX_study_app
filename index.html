<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<title>전력거래사 학습 도우미</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600;700&family=Noto+Sans+KR:wght@400;500;600;700&display=swap');
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html{-webkit-text-size-adjust:100%;font-size:14px}
body{background:var(--bg);color:var(--t);font-family:'Noto Sans KR',-apple-system,'Apple SD Gothic Neo',sans-serif;overflow-x:hidden;min-height:100vh;min-height:100dvh}
::-webkit-scrollbar{width:4px}
::-webkit-scrollbar-thumb{background:var(--b);border-radius:4px}
button{font-family:inherit;cursor:pointer;-webkit-appearance:none}
input{font-family:inherit;-webkit-appearance:none}

:root{
  --bg:#FAF6F0;--s:#FFFFFF;--s2:#F5EFE6;
  --ac:#B8860B;--acd:#8B6508;--acg:rgba(184,134,11,0.08);
  --g:#2D8659;--gd:#E8F5EC;--gbg:rgba(45,134,89,0.08);
  --r:#C0392B;--rbg:rgba(192,57,43,0.06);
  --y:#D4A017;
  --t:#3E2F1C;--td:#6B5B4A;--tm:#9C8E7E;
  --b:#E8E0D4;--b2:#D9CFC2;
  --cb:#F0EBE3;
  --shadow:0 1px 3px rgba(62,47,28,0.06),0 1px 2px rgba(62,47,28,0.04);
  --shadow-lg:0 4px 16px rgba(62,47,28,0.08),0 2px 6px rgba(62,47,28,0.04);
}

.app{min-height:100vh;min-height:100dvh}
.hdr{background:linear-gradient(170deg,#F5EDE0,#FAF6F0,#FDF9F3);border-bottom:1px solid var(--b);padding:env(safe-area-inset-top,0) 0 0}
.hdr-in{padding:24px 18px 18px;max-width:720px;margin:0 auto}
.topbar{background:var(--s);border-bottom:1px solid var(--b);padding:11px 16px;display:flex;align-items:center;gap:8px;position:sticky;top:0;z-index:10;box-shadow:var(--shadow)}
.content{max-width:720px;margin:0 auto;padding:14px 14px 80px}
.tabs{background:var(--s);border-bottom:1px solid var(--b);display:flex;overflow-x:auto;padding:0 12px;position:sticky;top:45px;z-index:9;-webkit-overflow-scrolling:touch}
.tabs::-webkit-scrollbar{display:none}

.btn-back{background:var(--cb);border:1px solid var(--b);color:var(--td);border-radius:8px;padding:6px 12px;font-size:12px;flex-shrink:0;transition:all .15s}
.btn-back:hover{background:var(--b)}
.btn-tag{padding:6px 12px;border-radius:20px;border:1px solid var(--b);background:var(--s);color:var(--tm);font-size:11px;white-space:nowrap;transition:all .2s;font-weight:500}
.btn-tag.on{border-color:var(--ac);background:var(--acg);color:var(--ac);font-weight:600}
.btn-tag:hover{border-color:var(--b2)}
.btn-pill{padding:10px 20px;border-radius:24px;border:none;font-size:13px;font-weight:600;color:#fff;letter-spacing:.3px}

.card{background:var(--s);border:1px solid var(--b);border-radius:14px;padding:14px 16px;margin-bottom:8px;transition:all .2s;box-shadow:var(--shadow)}
.card:active{border-color:var(--b2);box-shadow:var(--shadow-lg)}
.part-card{display:flex;gap:12px;align-items:flex-start}
.part-icon{font-size:24px;flex-shrink:0;margin-top:2px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:var(--cb);border-radius:12px}

.tc-head{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.tc-badge{font-size:9px;padding:2px 7px;border-radius:10px;font-weight:600;letter-spacing:.3px}
.tc-name{flex:1;font-size:13px;font-weight:700;min-width:0;color:var(--t)}
.tc-arrow{color:var(--tm);font-size:10px;transition:transform .25s ease;flex-shrink:0}
.tc-arrow.open{transform:rotate(180deg)}
.tc-short{font-size:11.5px;color:var(--td);margin-top:4px;line-height:1.5}
.tc-detail{margin-top:12px;padding-top:12px;border-top:1px dashed var(--b);font-size:12px;line-height:1.9;color:var(--td);white-space:pre-line}
.tc-refs{margin-top:10px;display:flex;flex-wrap:wrap;gap:5px;align-items:center}
.tc-ref{font-size:10px;color:var(--ac);background:var(--acg);padding:3px 8px;border-radius:10px;cursor:pointer;font-weight:500;transition:background .15s}
.tc-ref:hover{background:rgba(184,134,11,0.14)}

.concept{background:var(--s);border:1px solid var(--b);border-radius:14px;padding:18px;margin-bottom:14px;box-shadow:var(--shadow)}
.concept-idx{font-size:9px;color:var(--ac);letter-spacing:2px;margin-bottom:6px;font-weight:700}
.concept-title{font-size:16px;font-weight:700;margin-bottom:12px;line-height:1.4;font-family:'Noto Serif KR',serif;color:var(--t)}
.concept-body{font-size:12.5px;line-height:1.95;color:var(--td);white-space:pre-line}

.quiz-opt{display:block;background:var(--s);border:1px solid var(--b);border-radius:12px;padding:12px 14px;margin-bottom:7px;font-size:12.5px;color:var(--td);text-align:left;width:100%;transition:all .2s}
.quiz-opt:hover{border-color:var(--b2);background:var(--cb)}
.quiz-opt.sel{border-color:var(--ac);background:var(--acg);color:var(--acd);font-weight:500}
.quiz-opt.correct{border-color:var(--g);background:var(--gbg);color:var(--g);font-weight:600}
.quiz-opt.wrong{border-color:var(--r);background:var(--rbg);color:var(--r)}

.fc-card{width:100%;min-height:260px;background:var(--s);border:1px solid var(--b);border-radius:18px;padding:28px 22px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;transition:all .25s;box-shadow:var(--shadow-lg)}
.fc-card.flipped{border-color:var(--ac);background:linear-gradient(170deg,#FFFCF5,#FFF8ED)}

.tbl{width:100%;border-collapse:separate;border-spacing:0;font-size:11px;border-radius:12px;overflow:hidden;border:1px solid var(--b)}
.tbl th{background:var(--cb);padding:8px 10px;text-align:left;color:var(--acd);font-weight:700;white-space:nowrap;border-bottom:1px solid var(--b)}
.tbl th:not(:last-child),.tbl td:not(:last-child){border-right:1px solid var(--b)}
.tbl td{padding:8px 10px;color:var(--td);border-bottom:1px solid var(--b)}
.tbl tr:last-child td{border-bottom:none}
.tbl td:first-child{color:var(--t);font-weight:600;white-space:nowrap}

.tool-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:16px}
.tool-btn{background:var(--s);border:1px solid var(--b);border-radius:14px;padding:16px 10px;text-align:center;box-shadow:var(--shadow);transition:all .2s}
.tool-btn:hover{box-shadow:var(--shadow-lg);transform:translateY(-1px)}
.tool-btn:active{transform:translateY(0)}
.tool-emoji{font-size:20px;margin-bottom:5px}
.tool-label{font-size:11px;font-weight:700;color:var(--t)}
.tool-sub{font-size:9px;color:var(--tm);margin-top:3px;font-weight:500}

.prog-bar{height:5px;background:var(--b);border-radius:3px;overflow:hidden;margin-top:12px}
.prog-fill{height:100%;background:linear-gradient(90deg,var(--acd),var(--ac),#D4A017);border-radius:3px;transition:width .5s ease}

.filter-row{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:8px}
.search{width:100%;padding:10px 14px;background:var(--s);border:1px solid var(--b);border-radius:12px;color:var(--t);font-size:13px;outline:none;margin-bottom:10px;box-shadow:var(--shadow);transition:border-color .2s}
.search:focus{border-color:var(--ac);box-shadow:0 0 0 3px rgba(184,134,11,0.08)}
.search::placeholder{color:var(--tm)}

.api-bar{background:var(--cb);border-bottom:1px solid var(--b);padding:12px 14px;display:none;flex-direction:column;gap:6px}
.api-bar.show{display:flex}
.api-row{display:flex;gap:6px;align-items:center}
.api-input{flex:1;padding:8px 12px;background:var(--s);border:1px solid var(--b);border-radius:8px;color:var(--t);font-size:12px;font-family:monospace;outline:none}
.api-input:focus{border-color:var(--ac)}
.api-save{background:var(--ac);color:#fff;border:none;border-radius:8px;padding:8px 16px;font-size:11px;font-weight:700;flex-shrink:0;transition:background .15s}
.api-save:hover{background:var(--acd)}
.api-ok{color:var(--g);font-size:11px;display:none;font-weight:600}

.tag-row{display:flex;gap:4px;flex-wrap:wrap;margin-top:5px}
.tag-sm{font-size:9px;color:var(--tm);background:var(--cb);padding:2px 7px;border-radius:8px;border:1px solid var(--b);font-weight:500}
.empty{text-align:center;color:var(--tm);padding:40px 0;font-size:13px}

.tt-word{color:var(--ac);border-bottom:1.5px dotted rgba(184,134,11,0.4);cursor:pointer;padding-bottom:0.5px;transition:color .15s;font-weight:500}
.tt-word:active{color:var(--acd)}
#termTip{display:none;position:fixed;left:8px;right:8px;bottom:0;z-index:100;padding:0 0 env(safe-area-inset-bottom,0);pointer-events:none}
#termTip.show{display:block;pointer-events:auto}
.tt-box{background:#FFFCF5;border:1px solid var(--ac);border-radius:16px 16px 0 0;padding:16px 18px 18px;box-shadow:0 -6px 30px rgba(62,47,28,.12);max-height:55vh;overflow-y:auto;-webkit-overflow-scrolling:touch}
.tt-head{display:flex;align-items:center;gap:6px;margin-bottom:8px}
.tt-name{font-size:15px;font-weight:700;color:var(--acd);flex:1;font-family:'Noto Serif KR',serif}
.tt-sub{font-size:11.5px;color:var(--td);margin-bottom:10px;line-height:1.5}
.tt-detail{font-size:12px;line-height:1.85;color:var(--td);white-space:pre-line;max-height:25vh;overflow-y:auto}
.tt-close{background:var(--cb);border:1px solid var(--b);color:var(--tm);border-radius:8px;padding:4px 10px;font-size:11px;flex-shrink:0;font-weight:600}
.tt-goto{display:inline-block;margin-top:10px;font-size:11px;color:var(--ac);background:var(--acg);padding:5px 12px;border-radius:10px;cursor:pointer;font-weight:600;transition:background .15s}
.tt-goto:hover{background:rgba(184,134,11,0.14)}
.tt-overlay{position:fixed;inset:0;z-index:99;background:rgba(62,47,28,.18)}
.safe-bottom{padding-bottom:env(safe-area-inset-bottom,0)}
</style>
</head>
<body>
<div class="app" id="app"></div>
<div class="tt-overlay" id="ttOverlay" style="display:none" onclick="closeTip()"></div>
<div id="termTip"><div class="tt-box" id="ttBox"></div></div>

<script>
// ═══════════════════════════════════════════════════════════
//  전력거래사 학습 가이드 기반 자체학습 프로그램
//  v1 — 용어 사전 · 이론 학습 · AI 퀴즈 · 플래시카드
// ═══════════════════════════════════════════════════════════

const CATS={econ:{l:"경제학",c:"#2563EB",i:"📊"},mkt:{l:"전력시장",c:"#B8860B",i:"⚡"},grid:{l:"전력계통",c:"#0D7C5F",i:"🔌"},law:{l:"법규",c:"#7C3AED",i:"📜"},trade:{l:"실무",c:"#C2410C",i:"💼"}};
const DL=d=>d===1?"기초":d===2?"중급":"심화";
const DC=d=>d===1?"#2D8659":d===2?"#B8860B":"#C0392B";

const G={
// ── 경제학 ──
"수요곡선":{s:"가격과 수요량의 관계를 보여주는 우하향 곡선",f:"다른 조건이 불변인 상태에서 가격과 수요량의 관계를 보여주는 곡선.\n\n수요의 법칙에 의해 가격이 오르면 수요량은 감소하므로 우하향.\n\n수요곡선상의 이동: 자체 가격 변화에 따른 수요량 변화\n수요곡선의 이동: 소득, 연관재 가격, 취향, 미래 기대, 소비자 수 변화 시\n\n• 정상재: 소득↑ → 수요↑\n• 열등재: 소득↑ → 수요↓\n• 대체재: A가격↓ → B수요↓\n• 보완재: A가격↓ → B수요↑",c:"econ",d:1,r:["공급곡선","시장균형","가격탄력성"]},
"공급곡선":{s:"가격과 공급량의 관계를 보여주는 우상향 곡선",f:"공급의 법칙에 의해 가격이 오르면 공급량은 증가하므로 우상향.\n\n공급곡선을 이동시키는 변수:\n• 요소 가격 (임금, 원자재)\n• 기술\n• 미래에 대한 기대\n• 판매자의 수",c:"econ",d:1,r:["수요곡선","시장균형"]},
"시장균형":{s:"수요량과 공급량을 일치시키는 가격과 거래량",f:"수요곡선과 공급곡선이 만나는 점.\n\n균형가격: 수요량 = 공급량이 되는 가격\n균형거래량: 균형가격에서의 거래량\n\n초과공급(surplus): 공급량 > 수요량 → 가격 하락 압력\n초과수요(shortage): 수요량 > 공급량 → 가격 상승 압력\n\n수요·공급의 법칙: 자유 시장에서 가격은 궁극적으로 균형을 향해 움직임",c:"econ",d:1,r:["수요곡선","공급곡선","소비자잉여"]},
"가격탄력성":{s:"가격 변화에 대한 수요량/공급량 반응 정도",f:"수요의 가격탄력성 = 수요량의 변화율 / 가격의 변화율\n\n탄력성 결정 요인:\n• 밀접한 대체재 존재 → 탄력적\n• 필수품 → 비탄력적, 사치품 → 탄력적\n• 시장 범위 좁을수록 → 더 탄력적\n• 장기일수록 → 더 탄력적\n\n탄력성 = 0: 완전 비탄력적 (수직선)\n탄력성 < 1: 비탄력적\n탄력성 = 1: 단위탄력적\n탄력성 > 1: 탄력적\n탄력성 = ∞: 완전 탄력적 (수평선)\n\n비탄력적 수요: 가격↑ → 총수입↑\n탄력적 수요: 가격↑ → 총수입↓",c:"econ",d:2,r:["수요곡선","공급곡선"]},
"소비자잉여":{s:"지불 용의에서 실제 지불액을 뺀 금액",f:"소비자가 지불할 의사가 있는 금액에서 실제로 지불한 금액을 뺀 나머지.\n\n수요곡선 아래 + 균형가격 위의 면적으로 계산.\n\n생산자잉여 = 실제 받은 금액 - 생산 비용\n(공급곡선 위 + 균형가격 아래 면적)\n\n총잉여 = 소비자잉여 + 생산자잉여\n= 소비자가 누리는 가치 - 생산자가 치르는 비용\n\n완전경쟁시장의 균형 거래량은 총잉여를 극대화.",c:"econ",d:1,r:["시장균형","가격탄력성"]},
"무차별곡선":{s:"동일한 효용을 주는 재화 조합의 곡선",f:"소비자에게 동일한 수준의 효용을 제공하는 시장 바스켓의 모든 조합.\n\n특성:\n• 우하향 (한 재화↑ → 다른 재화↓)\n• 원점에 대해 볼록 (한계대체율 체감)\n• 서로 교차 불가\n• 우상향 이동 = 더 높은 효용\n\n한계대체율(MRS): 한 재화를 한 단위 더 얻기 위해 포기하는 다른 재화의 최대량\n= 무차별곡선의 기울기\n\n완전대체재: 직선 형태\n완전보완재: L자 형태",c:"econ",d:2,r:["예산제약","한계효용"]},
"예산제약":{s:"제한된 소득 내 소비자가 직면하는 소비의 제약",f:"예산선: 총지출이 소득과 일치하는 모든 재화 조합\n기울기 = 두 재화의 가격비 (-Px/Py)\n\n소득 증가 → 예산선 평행 이동 (우상향)\n재화 상대가격 변동 → 예산선 기울기 변화\n\n소비자 최적 선택: 무차별곡선과 예산선의 접점\n= 한계대체율(MRS) = 가격비(Px/Py)",c:"econ",d:2,r:["무차별곡선","한계효용"]},
"한계효용":{s:"재화 1단위 추가 소비의 추가적 만족도",f:"한계효용 체감의 법칙: 재화를 더 많이 소비할수록 추가적 효용이 점점 작아짐.\n\n한계효용 균등의 법칙:\n각 재화의 단위지출당 한계효용이 같을 때 효용 극대화\nMUx/Px = MUy/Py",c:"econ",d:2,r:["무차별곡선","예산제약"]},
"기대효용":{s:"불확실한 상황에서 확률로 가중한 효용의 합",f:"기대효용 = Σ(확률 × 효용)\n\n위험에 대한 선호:\n• 위험회피: 오목 효용함수, 한계효용 체감\n• 위험중립: 선형 효용함수, 한계효용 불변\n• 위험선호: 볼록 효용함수, 한계효용 체증\n\n위험프리미엄: 위험 회피 대가로 지불할 최대 금액\n\n위험 감소 방법:\n• 다각화(diversification)\n• 보험\n• 정보 획득",c:"econ",d:2,r:["소비자잉여"]},
"생산함수":{s:"생산요소 투입량과 산출량의 관계",f:"Q = F(L, K, E, M)\nL: 노동, K: 자본, E: 에너지, M: 재료\n\n단기: 고정투입요소 + 가변투입요소 존재\n장기: 모든 생산요소가 가변\n\n총생산, 한계생산, 평균생산:\n• 한계생산(MP): 노동 1단위 추가 시 추가 산출\n• 평균생산(AP): 노동 1단위당 산출\n\n한계생산체감의 법칙:\n가변요소 투입 증가 시 한계생산이 점차 감소",c:"econ",d:2,r:["등량곡선","규모수익"]},
"등량곡선":{s:"같은 산출량을 생산하는 노동·자본 조합의 곡선",f:"무차별곡선의 생산자 버전.\n\n한계기술대체율(MRTS): 노동 1단위 추가 투입 시 줄일 수 있는 자본량\n= 등량곡선의 기울기 (체감)\n\n대체탄력성: 생산요소 간 대체 용이성 지표",c:"econ",d:2,r:["생산함수","규모수익"]},
"규모수익":{s:"모든 투입 증가 시 산출 변화의 패턴",f:"규모수익불변: 투입 k배 → 산출 k배\n규모수익체증: 투입 k배 → 산출 > k배\n규모수익체감: 투입 k배 → 산출 < k배\n\n규모의 경제: 산출↑ 시 평균비용↓\n규모의 불경제: 산출↑ 시 평균비용↑\n범위의 경제: 두 제품 함께 생산이 개별 생산보다 저렴\n학습효과: 생산 경험 축적으로 평균비용곡선 자체가 하락",c:"econ",d:2,r:["생산함수","등량곡선"]},
"기회비용":{s:"최선의 대안을 포기함으로써 잃는 가치",f:"경제적 비용 = 회계비용 + 기회비용\n회계비용: 실제 지불한 비용 + 감가상각비\n매몰비용: 되돌릴 수 없는 비용 (기회비용=0)\n\n의사결정 시 매몰비용은 고려하지 않음.\n경제적 이윤 = 수입 - 경제적 비용(기회비용 포함)",c:"econ",d:1,r:["생산함수"]},
"완전경쟁시장":{s:"다수의 가격수용자가 동질 상품을 거래하는 시장",f:"특징:\n① 다수의 공급자·수요자\n② 동질적(동일한) 상품\n③ 자유로운 진입·퇴출\n\n기업은 가격수용자(price taker)\n이윤극대화: P = MR = MC\n단기 공급곡선 = AVC 최저점 이상의 MC곡선\n\n장기균형: P = LMC = LAC (경제적 이윤 = 0)\n모든 기업이 효율적 규모에서 생산",c:"econ",d:2,r:["독점시장","과점시장"]},
"독점시장":{s:"단일 공급자가 대체재 없는 상품을 공급하는 시장",f:"독점 발생 원인:\n• 핵심 자원 독점\n• 정부의 배타적 권리 부여\n• 자연독점 (규모의 경제)\n\n이윤극대화: MR = MC (P > MC)\n한계수입 < 가격\n경제적 순손실(사중손실) 발생\n\n대독점 정책: 독점금지법, 가격규제, 국유화, 자유방임",c:"econ",d:2,r:["완전경쟁시장","과점시장","가격차별"]},
"과점시장":{s:"소수의 공급자가 동질/차별 상품을 공급하는 시장",f:"특징: 기업 간 전략적 상호 의존\n\n쿠르노 모형: 기업들이 생산량을 동시에 결정\n→ 전력시장 입찰분석에도 활용\n\n용의자의 고민(죄수의 딜레마):\n개인적 이기심으로 협조 어려움\n카르텔: 기업들이 독점기업처럼 행동하여 총이윤 극대화\n\n기업 수↑ → 완전경쟁에 가까워짐",c:"econ",d:2,r:["완전경쟁시장","독점시장"]},
"가격차별":{s:"동일 재화에 소비자별 다른 가격을 책정하는 전략",f:"독점기업이 소비자 지불용의에 따라 차별적 가격 부과\n\n완전가격차별:\n• 경제적 순손실 없음\n• 모든 잉여가 독점기업에 귀속\n• 소비 포기 소비자에게도 구매 기회 제공",c:"econ",d:2,r:["독점시장"]},
"수요독점":{s:"생산자는 다수, 소비자는 하나인 시장 구조",f:"수요독점자는 경쟁시장보다 낮은 요소 가격 책정 → 수요독점적 착취\n\n한국 전력시장에서 한전은 사실상 단일구매자(single buyer)\n→ 수요독점적 구조의 대표 사례",c:"econ",d:2,r:["독점시장","완전경쟁시장"]},
"네트워크외부효과":{s:"다른 소비자의 구매가 내 수요에 영향을 미치는 현상",f:"양의 외부효과 → 밴드왜건(편승) 효과\n: 다른 사람이 많이 쓸수록 내 수요 증가\n→ 시장수요가 개별수요보다 탄력적\n\n음의 외부효과 → 스노브(속물) 효과\n: 다른 사람이 많이 쓸수록 내 수요 감소\n→ 시장수요가 개별수요보다 비탄력적",c:"econ",d:2,r:["가격탄력성"]},

// ── 전력시장 ──
"변동비반영시장":{s:"발전기의 변동비로 시장가격을 결정하는 한국 전력시장",f:"CBP(Cost-based Pool): 입찰가격이 아닌 발전기들의 변동비로 가격 결정\n\n입찰서에 '가격'이 포함되지 않음 (핵심 특징)\n\n변동비는 비용평가위원회에서 사전 평가·확정한 자료를 적용\n\n※ 일반적인 전력시장은 발전사업자의 입찰가격으로 가격이 결정되나, 한국은 변동비 기반",c:"mkt",d:1,r:["의무적풀시장","계통한계가격","비용평가위원회"]},
"의무적풀시장":{s:"모든 전력거래자가 전력시장에 의무 참여하는 구조",f:"전기사업법 제31조에 따라 전력거래자는 의무적으로 전력시장 참여\n\n예외 사항 (시행령 제19조):\n• 도서지역(전력계통 미연결) 전력 거래\n• 1MW 이하 재생에너지 발전설비\n• 1MW 초과 재생에너지 → 재생에너지전기공급사업자에 공급 (직접PPA)\n\nGross Pool이라고도 함",c:"mkt",d:1,r:["변동비반영시장","직접PPA","전기사업법"]},
"계통한계가격":{s:"전력도매시장가격(SMP) — 한계발전기의 변동비 기반",f:"SMP(System Marginal Price)\n\n변동비만 반영한 단기한계비용에 의해 결정\n→ 한계발전기의 고정비 보상을 위해 별도의 용량정산금(CP) 운영\n\n매 시간 단위로 결정\n\n하루전발전계획에서 총 발전비용 및 수요감축비용 최소화를 목적으로 수립",c:"mkt",d:2,r:["변동비반영시장","용량정산금","하루전발전계획"]},
"용량정산금":{s:"한계발전기의 고정비 보상을 위한 별도 정산금",f:"CP(Capacity Payment)\n\nSMP가 변동비만 반영하는 단기한계비용이므로\n발전기의 고정비(건설비 등)를 보상하기 위해 별도 운영\n\n전력시장운영규칙 [별표2]에 따라 정산",c:"mkt",d:2,r:["계통한계가격"]},
"하루전발전계획":{s:"거래일 하루 전 수립되는 최적 발전 스케줄",f:"전력거래소가 거래일의 SMP와 발전계획량 산출을 위해 수립\n\n목적: 총 발전비용 및 수요감축비용 최소화\n\n고려사항:\n• 발전비용자료, 입찰자료\n• 수요반응 입찰자료\n• 전력수요 예측자료\n• 운영예비력, 하향주파수예비력\n• 송전제약 검토\n\n자기제약, 송전제약, 예비력제약 등 수급여건 반영",c:"mkt",d:2,r:["계통한계가격","전력거래소"]},
"비용평가위원회":{s:"발전비용 관련 자료를 심사·확정하는 위원회",f:"전력거래소에 설치\n\n위원장 포함 6~9인으로 구성\n위원: 전력거래소 임직원, 산자부 공무원, 회원 대표, 전문가\n\n역할:\n• 발전비용 요소별 산출·적용기준 결정\n• 기준용량가격 결정\n• 성능시험 요청\n• 제출된 운전비용 자료 심사·확정",c:"mkt",d:2,r:["변동비반영시장"]},
"직접PPA":{s:"전력시장을 거치지 않고 재생에너지 전기를 직접 거래",f:"재생에너지전기공급사업자 → 전기사용자 직접 공급\n(전기사업법 제16조의5)\n\n1MW 초과 재생에너지 발전설비 → 직접PPA 가능\n\n직접구매자 요건: 수전설비용량 30MVA(3만kVA) 이상\n(재생에너지전기공급사업자로부터 공급받을 경우 합산 가능)",c:"mkt",d:2,r:["의무적풀시장","RPS제도"]},
"RPS제도":{s:"신·재생에너지 공급의무화 제도",f:"Renewable Portfolio Standard\n\n500MW 이상 발전설비 보유 사업자에게\n총발전량의 일정 비율을 신·재생에너지로 공급 의무화\n\n의무공급량 = 총발전량(신재생 제외) × 의무비율\n\n의무이행 연기: 20% 이내, 3년 범위\n미이행 시: 공급인증서 평균거래가격의 150% 이내 과징금",c:"mkt",d:2,r:["공급인증서","직접PPA"]},
"공급인증서":{s:"신·재생에너지 발전 공급을 증명하는 인증서(REC)",f:"REC(Renewable Energy Certificate)\n\n발급: 한국에너지공단 신재생에너지센터\n거래: 전력거래소\n\n설비확인 신청: 사용전 검사일로부터 1개월 이내\n\n전기소비자의 REC 구매 시장:\n• 장외거래시장 (연중 개설)\n• 플랫폼거래시장 (매월 1·3째주 금요일, 10~16시)",c:"mkt",d:2,r:["RPS제도"]},
"전력상품특성":{s:"비저장성, 비차별성, 물리적 시스템 의존성",f:"① 비저장성: 수요와 공급이 순간적으로 일치해야 함\n→ 전력시장·계통 운영자가 별도로 존재하는 이유\n→ ESS로 일부 해소\n\n② 비차별성: 투입 연료(원자력, 석탄, 가스)에 무관하게\n계통 통합 시 제품 정체성 소멸\n→ 일반적 제품차별화·가격차별화 이론 적용 어려움\n\n③ 물리적 시스템 의존성: 수급 불균형 시 시스템 붕괴\n→ 아무리 비용이 들어도 균형 유지 필수\n\n④ 풀링(pooling): 모든 발전기 출력이 통합 공급",c:"mkt",d:1,r:["변동비반영시장"]},
"전력거래소":{s:"전력시장 개설·운영 및 전력계통 운영 기관",f:"2001년 전력산업 구조개편 시 설립\n\n역할:\n• 전력시장 개설·운영 (입찰, 계량, 정산, 결제)\n• 전력시장운영규칙 제·개정\n• 장·단기 송전망 안정성 평가\n• 전력계통 운영계획 수립\n• 24시간 전력계통 감시·제어\n• 장·단기 전력수급계획 수립 지원\n• 전력수요예측 모형 개발·운영",c:"mkt",d:1,r:["하루전발전계획","의무적풀시장"]},

// ── 전력계통 ──
"화력발전":{s:"연료 연소 → 증기 → 터빈 → 발전기로 전기 생산",f:"석탄, 천연가스, 중유 등 연소\n→ 물을 고온 고압 증기로 변환\n→ 증기로 터빈 회전\n→ 발전기 구동\n\n가스터빈: 연소가스를 직접 이용하여 터빈 회전\n복합화력: 가스터빈 + 증기터빈 (2중 발전)",c:"grid",d:1,r:["원자력발전","태양광발전"]},
"원자력발전":{s:"핵분열 반응의 열에너지로 증기를 만들어 발전",f:"원자로 내 핵분열 반응 → 열에너지\n이후 과정은 화력발전과 동일 (증기 → 터빈 → 발전기)\n\n한국 전력계통에서 기저 발전 역할\n대규모 발전단지는 비수도권 해안가에 편재",c:"grid",d:1,r:["화력발전"]},
"태양광발전":{s:"태양전지의 광전효과로 햇빛을 직접 전기로 변환",f:"실리콘 반도체 태양전지(셀)에 빛 → 광전효과(Photovoltaic effect)\n→ 전기 발생\n\n재생에너지 중 가장 빠르게 보급 확대\nRPS제도의 주요 공급원",c:"grid",d:1,r:["풍력발전","RPS제도"]},
"풍력발전":{s:"바람의 운동에너지를 회전자로 기계에너지 변환 후 발전",f:"바람 → 회전자(Rotor) → 기계적 에너지 → 발전기 → 전기\n\n에너지 변환 시스템\n해상풍력 등으로 대규모화 추세",c:"grid",d:1,r:["태양광발전","RPS제도"]},
"연료전지":{s:"수소와 산소의 화학반응으로 직접 전기를 생산하는 기술",f:"연료극(양극): 수소 → 수소이온 + 전자\n전자는 외부회로 → 공기극(음극)\n공기극: 산소이온 + 수소이온 → 물 생성\n\n최종 반응: 수소 + 산소 → 전기 + 물 + 열\n\n신에너지로 분류됨",c:"grid",d:2,r:["화력발전"]},
"ACSR":{s:"강심 알루미늄 연선 — 가장 대표적 송전선",f:"Aluminum Conductor Steel Reinforced\n\n강선(인장강도 우수)을 중심으로\n경알루미늄선(도전율 우수)을 꼬아 만든 합성 연선\n\n송전선로에서 가장 널리 사용",c:"grid",d:2,r:["송전방식"]},
"송전방식":{s:"직류(HVDC)와 교류 송전의 특징 비교",f:"교류(AC) 송전:\n• 변압기로 승압·강압 용이 → 장거리 유리\n• 3상 3선식이 일반적\n• 단점: 표피효과, 코로나손, 페란티 현상\n\n직류(DC/HVDC) 송전:\n• 송전효율 높고, 유도장해 작음\n• 절연레벨 낮출 수 있음\n• 다른 계통 연계 용이\n• 단점: 차단 어려움, 승압·강압 어려움, 고조파\n\n한국: 제주 HVDC (#1, #2), 북당진-고덕 HVDC 운영 중",c:"grid",d:2,r:["ACSR","페란티현상"]},
"페란티현상":{s:"부하가 아주 적을 때 수전단 전압이 송전단보다 높아지는 현상",f:"선로의 정전용량 → 진상전류\n+ 선로의 자기인덕턴스 → 기전력\n→ 수전단 전압 > 송전단 전압\n\n경부하 시 발생",c:"grid",d:2,r:["송전방식","코로나"]},
"코로나":{s:"임계전압 이상에서 공기 절연 파괴로 방전되는 현상",f:"송전선로·애자 부근에서 발생\n소음·엷은 빛 동반\n\n복도체(한 상 당 2가닥 이상) 사용으로 방지\n중공전선(중심부 빈 공간)도 코로나 방지용",c:"grid",d:2,r:["송전방식"]},
"전력계통특징":{s:"한국 전력계통의 주요 특성",f:"• 섬 계통: 인접국과 연계되지 않음\n• 세계 최고 수준의 설비 밀도\n• 전력 수요 50% 이상이 수도권\n• 기저발전(석탄·원자력)은 비수도권 해안가\n• 수도권: 주로 LNG 복합발전\n• 비수도권 → 수도권 대규모 전력 융통\n• 재생에너지 비중 증가 추세\n• 발전설비 대용량화",c:"grid",d:1,r:["전력거래소","송전방식"]},
"전력수요예측":{s:"시간·일·주·월·장기별 전력 수요를 예측하는 기법",f:"시계열 분석: 이동평균법, 지수평활법, ARIMA 등\n인과형 모형: 회귀분석\nAI 기법: 신경회로망, CNN, RNN/LSTM, 딥러닝\n\n예측 기간별 구분:\n• 장기(7년+): 연간 최대부하, 전원계획·계통계획 활용\n• 단기(2년): 주별 최대부하, 유지보수 계획\n• 일간: 시간대별 수요, 하루전발전계획 활용\n• 실시간: 15분/5분 단위, 실시간 계통운영\n\n발전단 전력수요: 발전기 출력단자 합계\n송전단 전력수요: 주변압기 고압측 계량점 합계",c:"grid",d:2,r:["하루전발전계획","전력수급기본계획"]},
"전력수급기본계획":{s:"장기 전력 수급 안정을 위한 정부 계획",f:"전기사업법 제25조에 따라 산업통상자원부장관이 수립\n전력거래소가 수립 총괄 지원\n\n수립 주기: 2년\n역사: 장기전원개발계획(1960~80s) → 장기전력수급계획(1990s) → 전력수급기본계획(2001~현재)\n\n주요 내용:\n• 장기 전력수요 전망\n• 수요관리 목표량\n• 발전설비 계획\n• 장기 송·변전 설비계획\n\n확정 절차: 공청회 → 국회보고 → 전력정책심의회 → 산자부 장관 확정·공고\n\n전산모형: EGEAS, WASP, P-POOL",c:"grid",d:2,r:["전력수요예측","전력거래소"]},

// ── 전기관련 법규 ──
"전기사업법":{s:"전기사업의 허가·규제·전력시장 운영의 근거 법률",f:"전기사업자 종류:\n• 발전사업자: 전기 생산 → 전력시장 통해 판매\n• 송전사업자: 발전소→배전사업자 송전설비 관리\n• 배전사업자: 전기사용자에게 배전설비 운용\n• 전기판매사업자: 전기사용자에게 전기 공급\n• 구역전기사업자: 35MW 이하, 특정 공급구역\n\n전기신사업: 전기차충전, 소규모전력중개, 재생에너지전기공급, 통합발전소, 재생에너지전기저장판매, 송전제약발생지역전기공급\n\n주요 조항: 제31조(전력거래), 제32조(직접 구매), 제35조(전력거래소 설립)",c:"law",d:1,r:["전력시장운영규칙","의무적풀시장"]},
"전력시장운영규칙":{s:"전력시장 운영의 세부 절차를 규정한 규칙",f:"전기사업법 제43조에 따라 제정\n\n주요 내용:\n제2장: 가격결정 (발전비용 평가, 입찰, 수요예측)\n제4장: 계량과 정산 및 결제\n제5장: 전력계통 운영\n\n입찰서에는 공급가능용량 및 기술적 특성을 기재\n(가격은 비용평가위원회에서 결정한 변동비 적용)",c:"law",d:2,r:["전기사업법","변동비반영시장"]},
"구역전기사업":{s:"35MW 이하 발전설비로 특정 구역에 직접 전기 공급",f:"전기사업법 제2조 제11호\n시행령 제1조의2: 발전설비용량 3.5만kW 이하\n\n전력시장을 통하지 않고 공급구역 전기사용자에게 직접 공급\n\n부족하거나 남는 전력은 전력시장에서 거래 가능\n(시행령 제19조 제4항)",c:"law",d:2,r:["전기사업법"]},
"신재생에너지법":{s:"신에너지 및 재생에너지 개발·이용·보급 촉진법",f:"신에너지: 기존 화석연료 변환 또는 수소·산소 화학반응 → 전기/열\n(수소에너지, 연료전지, 석탄액화·가스화)\n\n재생에너지: 재생 가능한 에너지 변환\n(태양광, 풍력, 수력, 해양, 지열, 바이오 등)\n\nRPS제도, 공급인증서(REC) 제도의 근거 법률",c:"law",d:1,r:["RPS제도","공급인증서","전기사업법"]},

// ── 전력거래 실무 ──
"전력거래절차":{s:"발전비용평가→수요예측→입찰→발전계획→정산 흐름",f:"전력시장 운영 절차:\n1. 발전비용 평가 (비용평가위원회)\n2. 전력수요 예측\n3. 발전회사 입찰 (공급가능용량 + 기술특성)\n4. 하루전발전계획 수립 (총비용 최소화)\n5. 계통한계가격(SMP) 결정\n6. 신뢰도발전계획 수립\n7. 실시간 급전\n8. 계량\n9. 정산\n\n발전기 등록 절차:\n이파워마켓 → 회원가입 → 전력거래자 등록 → 발전기 등록 → 사용전 검사 → 계량설비봉인 → 전력거래개시 승인",c:"trade",d:2,r:["하루전발전계획","변동비반영시장"]},
"자가용전기설비":{s:"자기 사용을 위해 설치한 전기 발전 설비",f:"원칙: 전력시장 거래 불가 (전기사업법 제31조 제2항)\n\n예외 (시행령 제19조 제2항):\n① 태양광 설비 → 자가 사용 후 남은 전력 거래 가능\n② 태양광 외 설비 → 연간 총생산량 50% 미만 거래 가능\n(석탄 설비는 2017.2.28 이전 인가·신고 건만 가능)",c:"trade",d:2,r:["전기사업법","전력거래절차"]}
,

// ── 전력시장운영규칙 핵심 용어 ──
"중앙급전발전기":{s:"전력거래소 급전지시에 따라 운전하는 20MW 초과 발전기",f:"설비용량 20MW 초과 발전기로서 전력거래소의 급전지시에 따라 운전\n\n비중앙급전발전기: 중앙급전발전기가 아닌 발전기\n\n중앙급전발전기 → 전력시장 직접 참여, 입찰 의무\n비중앙급전발전기 → 별도 정산 방식 적용",c:"mkt",d:1,r:["비중앙급전발전기","공급가능용량","급전지시"]},
"비중앙급전발전기":{s:"중앙급전발전기가 아닌 발전기 (20MW 이하 등)",f:"중앙급전발전기(20MW 초과)에 해당하지 않는 발전기\n\n정산방식:\n계량전력량 × Min(SMP, 정산상한가격 or 긴급정산상한가격) × TLF\n\n비중앙급전전기저장장치도 유사 방식으로 정산\n\n예: 소규모 태양광, 소형 풍력, 소규모 연료전지 등",c:"mkt",d:2,r:["중앙급전발전기","전력량정산금"]},
"공급가능용량":{s:"발전사업자가 입찰로 거래시간별 공급 가능한 용량(MWh)",f:"중앙급전발전기·전기저장장치 보유 발전사업자가\n입찰을 통해 거래시간별로 공급 가능한 용량\n\n단위: MWh\n\n입찰서에 기재하는 핵심 항목\n용량정산금(CP) 산정의 기초가 됨",c:"mkt",d:2,r:["용량정산금","입찰서","중앙급전발전기"]},
"정산상한가격":{s:"육지 중앙급전발전기 전력량에 적용하는 SMP 상한값",f:"육지 중앙급전발전기의 발전 전력량 정산에 적용하는\n전력시장가격의 상한값(원/kWh)\n\n기준용량가격 × 일정 계수로 산정\n\n긴급정산상한가격:\n산업통상자원부 장관이 고시하는 전력거래가격의 상한가격\n(전력거래가격 상한에 관한 고시 제4조)\n\n고정가격계약의 정산상한가격:\nRPS 고정가격계약 발전기에 별도 적용",c:"mkt",d:3,r:["계통한계가격","전력량정산금","긴급정산상한가격"]},
"긴급정산상한가격":{s:"산업통상자원부 장관이 고시한 전력거래가격의 상한",f:"전력거래가격 상한에 관한 고시 제4조에 따라\n산업통상자원부 장관이 고시하고 전력거래소에 통보\n\n비상 상황에서 전력가격 급등 방지 목적\n2022.11.30 신설\n\n적용 시 비중앙급전발전기 등의 연료비 보전 정산 별도 진행",c:"mkt",d:3,r:["정산상한가격","계통한계가격"]},
"정산조정계수":{s:"한전 자회사 발전기·석탄발전기의 정산금 조정 계수",f:"정부 요금규제를 받는 전기판매사업자(한전)가\n50% 초과 지분 소유 발전사업자의 발전기와\n중앙급전 석탄발전기의 전력거래 정산금을 조정하는 계수\n\n정부 전기요금 규제와 시장가격 간 괴리를 해소하기 위한 장치",c:"mkt",d:3,r:["전력량정산금","계통한계가격"]},
"기준용량가격":{s:"용량가격 결정기준 발전기의 순진입비용 회수 보상가격",f:"용량가격 결정기준 발전기가 기본 운영조건에서\n순진입비용을 회수할 수 있도록 설정된 보상가격(원/kWh)\n\n순진입비용 = 고정비 연금액 - 전력시장 기대이익\n\n비용평가위원회가 결정\n\n용량가격 = 기준용량가격 × RCF × TCF × ĸ\n\nRCF: 용량가격계수\nTCF: 시간대별 용량가격계수\nĸ: 보정계수",c:"mkt",d:3,r:["용량정산금","비용평가위원회","용량가격계수"]},
"용량가격계수":{s:"RCFi — 최대부하·공급용량·손실계수 고려 산정 계수",f:"RCFi (Reserve Capacity Factor)\n\n최대부하, 공급용량, 송전손실계수를 고려하여 산정\n\n관련 계수:\n• TCFt: 시간대별 용량가격계수 (피크/비피크 차등 적용)\n• ĸ: 시간대별 용량가격계수 보정계수\n  (TCF 적용으로 발생하는 정산금 차액 최소화)\n• ICF: 공급용량계수 (시장기준예비율 기반)",c:"mkt",d:3,r:["기준용량가격","용량정산금"]},
"부가정산금":{s:"전력량정산금·용량정산금 외 발전기에 대한 정산금",f:"Uplift\n\n전력량정산금(MEP)과 공급가능용량 정산금(CP)을 제외한\n발전기에 대한 기타 정산금\n\n포함 항목:\n• 변동비보전정산금(MWP)\n• 기동비용조정정산금(SUAP)\n• 보조서비스 정산금\n• 예방정비 변경 정산금 등\n\n제외 항목:\n배출권 거래비용, 신재생에너지 공급의무이행비용,\n수요반응자원 정산금",c:"trade",d:2,r:["전력량정산금","변동비보전정산금","기동비용조정정산금"]},
"전력량정산금":{s:"MEP — 발전 전력량에 대한 SMP 기반 정산금",f:"MEPi,t = MPi,t × Min(MGOi,t, RAi,t+ε) × 1000\n\nMP = Min{Max(Min(SMP, PC, EPC), GP), SMP} × TLF\n\n핵심 변수:\n• SMP(t): 거래시간 계통한계가격\n• PC: 정산상한가격\n• MGO: 계량 전력량(MWh)\n• RA: 변경 공급가능용량\n• TLF: 정적손실계수\n• GP: 발전기 변동비\n\n거래일 정산금 = Σ(각 거래시간별 MEP)\n\n발전기 유형별 정산 공식이 상이함",c:"trade",d:3,r:["계통한계가격","정산상한가격","변동비보전정산금"]},
"변동비보전정산금":{s:"MWP — 급전지시로 변동비 미회수 시 차액 보전",f:"전력거래소가 입찰최소발전량 초과 급전한 발전량에 대해\n전력량정산금으로 변동비를 회수할 수 없는 경우 차액 보전\n\nMWP = HMWP(열제약) + SMWP(계통제약)\n\nSMWP = Max(SCMWG - MPMWG, 0)\n\n핵심:\n• 열제약운전: 열공급 등으로 최소출력 이상 운전 시\n• 계통제약운전: 계통안정 등 전력거래소 지시에 의한 운전\n\nCC모드 입찰 복합발전기가 GT모드로 운전 시\n→ GT모드 변동비 적용",c:"trade",d:3,r:["전력량정산금","부가정산금"]},
"기동비용조정정산금":{s:"SUAP — 발전기 기동비용의 정산 조정",f:"발전기가 기동 시 발생하는 기동비용에 대한 정산\n\n기동비용(SUC) = 기동연료비 + 소내전력비 + 용수비\n\nSUAPi = Σ(기동비용 - 기동시간 정산금)\n\n발전기 상태에 따라 구분:\n• 열간(Hot): 짧은 정지 후 재기동\n• 온간(Warm): 중간 정지 후 재기동\n• 냉간(Cold): 긴 정지 후 재기동\n\n각 상태별 기동비용이 상이",c:"trade",d:3,r:["부가정산금","전력량정산금"]},
"송전손실계수":{s:"TLF — 발전기별 송전손실을 반영하는 계수",f:"TLFi (Transmission Loss Factor)\n\n정적손실계수(STLF): 계절·요일별 산정\n동적손실계수(DTLF): 실시간 급전계획용\n조정손실계수(ASTLF): 발전계획·정산용\n용량손실계수(CLF): 동계 평일 주간 STLF 평균\n\n한계손실계수 방식으로 산정\n\n비용위원회 심의 → 결정·공개\n\n발전기 위치에 따라 계수가 달라짐\n→ 송전손실이 적은 수요지 근접 발전기가 유리",c:"grid",d:3,r:["계통한계가격","전력량정산금"]},
"하한제약":{s:"열공급·연료의무사용 등으로 발전기 운전범위 하한 설정",f:"제약사유: 열공급, 연료의무사용, 시운전 등\n\n상한제약: 동일 사유 + 대기오염물질 저감\n고정출력: 출력을 고정된 값으로 설정\n\n제약운전 시 변동비보전정산금 대상이 될 수 있음\n\n입찰서에 제약사유와 제약량을 기재해야 함",c:"mkt",d:2,r:["변동비보전정산금","입찰서"]},
"입찰서":{s:"발전사업자가 제출하는 거래시간별 공급 관련 서류",f:"제출 내용:\n• 거래시간별 공급가능용량\n• 기술적 특성 (MGC, MG, RUR, RDR 등)\n• 제약운전 정보 (하한제약, 상한제약, 고정출력)\n• 호기별 운전정보 (수력, 양수, 복합)\n\n※ 가격은 미포함 (변동비반영시장의 핵심 특징)\n\n제출 시한: 거래일 전일 10:00\n변경 입찰: 마감 후에도 일부 변경 가능\n\n미제출 시: 최근 1년 내 가장 불리한 자료 적용\n\n별지서식 31~33에 따른 양식 사용",c:"trade",d:2,r:["변동비반영시장","공급가능용량","하루전발전계획"]},
"급전지시":{s:"전력거래소가 전력수급 균형 위해 발전기 등에 내리는 지시",f:"전력거래소 → 발전사업자/수요관리사업자/송전사업자\n\n목적: 전력수급 균형유지 + 전력계통 안정적 운용\n\n대상:\n• 중앙급전발전기·전기저장장치 운영 발전사업자\n• 수요관리사업자 (전력수요 의무감축요청)\n• 송전사업자용 전기저장장치\n• 비상 시: 비중앙급전발전기에도 지시 가능\n\n급전지시량 산정:\n계통연결지연, 계통분리지연, 조기계통연결/분리 등\n다양한 상황별 산정절차 있음 (별표2 제13항)",c:"grid",d:2,r:["전력거래소","중앙급전발전기","예비력"]},
"예비력":{s:"전력수급 균형 유지를 위한 여유용량",f:"상향예비력:\n① 공급예비력: 총 공급능력 - 최대수요\n② 운영예비력: 실시간 수급 균형용\n   • 주파수조정예비력: AGC/GF 자동 응동\n   • 대기예비력(10분): 10분 이내 동기화\n   • 대기예비력(30분): 30분 이내 동기화\n\n하향예비력:\n전력수급 균형을 위해 발전력 감축하거나\n전력수요를 증대할 수 있는 용량\n• 하향주파수예비력: AGC/원격출력제어로 10분 이내 응동, 30분 이상 유지\n\n비상대기예비력(ECR):\n기후·환경 제약으로 가동 제한된 석탄발전기가\n비상시 대비하여 별도 입찰한 용량",c:"grid",d:2,r:["급전지시","보조서비스","전력계통"]},
"보조서비스":{s:"계통운영보조서비스 — 주파수조정·예비력·무효전력·자체기동",f:"전력계통의 신뢰성·안정성 유지,\n전기품질 유지, 전력거래 원활화를 위한 서비스\n\n종류:\n① 1차 주파수제어(GF): 조속기 자동 응동\n② 2차 주파수제어(AGC): 자동발전제어\n③ 3차 주파수제어: 대기예비력 투입\n④ 무효전력 보상: 전압 유지\n⑤ 자체기동(Black Start): 외부 전원 없이 기동 가능\n\n정산:\n• 1차: 속도조정률 기반 정산\n• 2차: AGC 운전 발전기 대상 정산\n• 3차: 대기예비력 용량 정산\n• 자체기동: 자체기동 시험검사 합격 발전기 정산",c:"grid",d:2,r:["예비력","급전지시","전력계통"]},
"전력계통":{s:"발전소~전기사용자를 물리적으로 연결한 전기설비 총체",f:"구성: 발전설비, 송변전설비, 배전설비, 부대설비\n\n계통운영: 원활한 전기 흐름과 전기품질 유지를 위한\n통제·관리·운영\n\n송전망: 송전선로, 변압기, 조상설비, 보호장치, ESS 등\n\n계통조작: 전력계통의 운전/정지/고장복구를 위한\n원격 또는 현장 조작\n\n수급조절: 발전기 출력 조정, 수요반응 감축,\n부하조정, 전압·주파수 제어 등",c:"grid",d:1,r:["급전지시","보조서비스","전력계통특징"]},
"거래기간":{s:"전력거래의 기본 시간 단위 — 1시간",f:"거래시간: 한계가격이 산출·적용되는 단위기간\n각 거래시간은 끝점으로 표시\n(거래시간 06시 = 05:00~06:00)\n\n거래일: 거래시간 01시~24시\n발전계획수립기간: 거래일 01시~24시\n\n정산은 거래시간 단위로 수행",c:"trade",d:1,r:["전력량정산금","하루전발전계획"]},
"계량":{s:"전력거래 정산을 위한 전력량 측정",f:"계량점: 주변압기 고압측의 한 지점\n(접속점을 원칙)\n\n계량설비 구성:\n• 주 계량설비: 일반 전력거래용\n• 비교 계량설비: 주 계량설비 고장 시 대체\n• 기타 계량설비: 신재생ESS 가중치 계산 등\n\n계량 등록부: 계량설비 정보 관리\n전력량계 직접시험 보고서 제출 의무\n\n전력거래소가 계량설비에서 취득한 데이터로 정산",c:"trade",d:2,r:["전력량정산금","전력거래절차"]},
"정산":{s:"전력시장 참여 사업자별 보상금·부담금 산정",f:"전력거래소가 수행\n\n공급자: 공급 대가로 받아야 할 금액 산출\n구매자: 구매 대가로 부담해야 할 금액 계산\n\n정산 체계:\nⅠ. 발전사업자 정산\n  • 전력량정산금(MEP)\n  • 용량정산금(CP)\n  • 변동비보전정산금(MWP)\n  • 기동비용조정(SUAP)\n  • 보조서비스 정산\n\nⅡ. 직접구매자 정산\nⅢ. 판매사업자 정산\nⅣ. 구역전기사업자 정산\nⅤ. 예측제도 참여자 정산\n\n결제: 전력거래전담 금융기관을 통한 대금 지급",c:"trade",d:2,r:["전력량정산금","용량정산금","부가정산금"]},
"발전계획":{s:"각 발전기의 시간대별 발전량 배분 계획",f:"계통제약 고려하여 수립\n실제 계통운전 및 한계가격 산출 기초\n\n포함:\n• 발전기별 시간대별 발전량\n• 수요반응자원 감축/증대 계획\n• 중앙급전전기저장장치 운영예비력\n\n종류:\n① 하루전발전계획: 최초 수립, SMP 결정용\n   (거래전일 17시까지 발표)\n② 신뢰도발전계획: 하루전 이후 변동 반영 수정\n③ 실시간급전계획: 실시간 계통운영용",c:"mkt",d:2,r:["하루전발전계획","계통한계가격","급전지시"]},
"최대발전용량":{s:"MGC — 주변압기 고압측 기준 발전기 최대 발전 가능 용량(MW)",f:"Maximum Generating Capacity\n\n사용전검사 또는 정기검사 시\n부하운전시험 합격 용량 - 소내전력\n\n원자력: 원자력법 검사용량 - 소내전력\n\n최소발전용량(MG):\n환경규제 준수하며 안정 운전 유지를 위한 최소용량\n\n출력증가율(RUR): 분당 출력 증가 능력(MW/min)\n출력감소율(RDR): 분당 출력 감소 능력(MW/min)\n최소운전시간(MUT): 계통연결 후 분리까지 최소 시간\n최소정지시간(MDT): 분리 후 재연결까지 최소 시간",c:"grid",d:2,r:["공급가능용량","입찰서"]},
"열량단가":{s:"FC — 연료비의 단위열량당 가격(원/Gcal)",f:"발전기 연료비의 단위열량에 대한 연료가격\n\n포함 가능 항목:\n• 연료 자체 가격\n• 환경개선 활동 수반 변동비\n• 온실가스 배출권 거래비용\n\n국내탄 발전기: 전력산업기반기금 지원금 차감\n\n입출력특성곡선:\nH = NLHC + LHC×P + QHC×P²\n\n• NLHC: 열소비상수(Gcal/h)\n• LHC: 1차 열소비계수(Gcal/MWh)\n• QHC: 2차 열소비계수(Gcal/MW²h)\n\n변동비 = 열량단가 × 열소비율",c:"trade",d:3,r:["전력량정산금","비용평가위원회"]},
"수요반응":{s:"DR — 전력부하 감축/증대를 통한 수급 균형 참여",f:"수요관리사업자가 수요반응자원 운영\n수요반응참여고객 모집하여 구성\n\n유형:\n• 표준DR / 중소형DR / 제주DR\n• 국민DR / 주파수DR / 플러스DR\n\n감축: 전력수요 의무감축요청에 따른 부하 감소\n증대: 자발적 수요증대 또는 실시간 증대요청\n\n정산:\n별표 26(수요반응자원의 정산 기준)에 따름\n\n고객기준부하(CBL) 산정 기준: 별표 28\n전기소비형태 검증 기준: 별표 29",c:"trade",d:2,r:["급전지시","예비력","전력거래소"]},
"전기저장장치":{s:"ESS — 전기에너지를 저장·방전하는 설비",f:"중앙급전전기저장장치:\n• 전력거래소 급전지시에 따라 운전\n• 정상상태/과도상태/회복상태 운전모드\n\n비중앙급전전기저장장치: 별도 정산방식\n\n실효용량: 입찰 공급가능용량 × 실효용량비율\n(공급신뢰도 기여도 분석으로 산정)\n\n송전사업자용 전기저장장치:\n송전사업자가 운영, 급전지시 대상\n\n정산:\n• 방전: 전력량정산금 + 용량정산금\n• 충전: 충전전력변동비로 정산",c:"grid",d:2,r:["중앙급전발전기","용량정산금","보조서비스"]},
"비상상황":{s:"광역정전 우려 또는 전력수급 균형 유지 곤란 상태",f:"내부 원인: 다중고장, 예비력 부족\n외부 원인: 폭풍, 자연현상, 사회혼란, 태업\n\n비상 시:\n• 비중앙급전발전기에도 급전지시 가능\n• 비상시 급전지시 절차(별표 12) 적용\n• 비상시 전력시장운영 절차(별표 24) 적용\n\n관련 용어:\n• 고장정지: 보호장치 자동작동에 의한 정지\n• 긴급정지: 긴급상황으로 설비를 계통 분리\n• 휴전계획: 점검·보수 목적의 사전 정지계획",c:"grid",d:2,r:["급전지시","예비력","전력계통"]},
"결제":{s:"전력거래 정산 결과에 따른 대금 지급·수납",f:"전력거래전담 금융기관을 통해 수행\n\n결제 절차:\n① 전력거래소 → 정산금 통지서 발행\n② 청구서 발행\n③ 전력거래전담 금융기관 → 대금 이체\n\n채무불이행 시:\n• 통지서 발송\n• 거래정지 통지\n• 연체이자 부과\n\n재정보증:\n전력구매자(판매사업자, 직접구매자, 구역전기사업자)는\n재정보증 제출 의무",c:"trade",d:2,r:["정산","전력거래절차"]},
"시운전발전기":{s:"사용전검사 미완료·상업운전개시 미신고 중앙급전발전기",f:"법 제63조 사용전검사를 받지 않은 발전기로서\n상업운전개시 신고를 하지 않은 중앙급전발전기\n\n비중앙급전시운전발전기:\n비중앙급전발전기 중 사용전검사 미완료 발전기\n(2기 이상→1기로 보는 경우 일부 미검사 포함)\n\n시운전 전력 정산:\n별표2 제7항에 따라 별도 정산",c:"trade",d:2,r:["중앙급전발전기","계량"]},
"복합발전기":{s:"가스터빈(GT)+스팀터빈(ST)으로 구성된 발전기",f:"CC모드(Combined Cycle): GT+ST 동시 운전\nGT모드: 가스터빈만 단독 운전\n\n다조합 복합발전기:\n2기 이상 GT + 1기 ST로 구성 (2026.1.1 시행예정)\n\n관련 입찰 항목:\n• GT 단독운전 가능여부/시간\n• GT 기동우선순위\n• 최소출력 기준GT 대수\n• GT 입찰대비 단독운전가능 용량비\n\nCC→GT 모드 전환 시:\n변동비보전정산금에서 GT모드 변동비 적용\n\n계통제약 운전 중 효율차이 추가정산금 가능",c:"grid",d:2,r:["중앙급전발전기","입찰서","변동비보전정산금"]},
"양수발전기":{s:"상부 저수지로 물을 양수 후 방류·발전하는 설비",f:"정산 특수성:\n① 전력량정산금 (방전)\n② 공급가능용량 정산 (CP)\n③ 양수동력 정산:\n  • 양수계획량 이내 실제 양수전력량 정산\n  • 초과 양수 시 초과분 정산\n  • 미달 양수 시 미양수분 정산\n\n양수동력변동비 산정:\n별표2 제14항의 산정절차에 따름\n\n급전지시량 산정:\n수력·양수발전기의 별도 산정절차 적용",c:"grid",d:2,r:["전기저장장치","용량정산금"]},
"직접구매자":{s:"전력시장에서 전력을 직접 구매할 수 있는 자격자",f:"자격: 수전설비용량 30MVA(3만kVA) 이상 전기사용자\n(재생에너지전기공급사업자로부터 공급받을 경우 합산 가능)\n\n정산:\n① 전력량: SMP × 유효구매전력량 × 손실계수\n② 용량: 직접구매용량가격 × 적용전력\n③ 부가정산금: 부가정산금단가 × 유효구매전력량\n\n유효구매전력량:\n물리적 계량값을 손실 반영하여 보정한 전력량\n\n직접구매용량보정계수:\n연간 평균입찰용량 / 연간 최대부하",c:"trade",d:2,r:["정산","의무적풀시장"]},
"판매사업자":{s:"전기사용자에게 전기를 공급하는 사업자 (한전)",f:"전기판매사업자 = 현재 한국전력공사\n\n정산:\n① 전력량: SMP × 전력구매량\n② 가용능력: 시간대별 용량가격\n③ 부가정산금: 부가정산금단가 × 구매전력량\n\n채무불이행 시:\n• 14일 이내 납부 → 경고\n• 30일 초과 → 거래정지\n• 연체이자: 한은 기준금리 + 가산금리",c:"trade",d:2,r:["직접구매자","정산"]},
"구역전기사업자정산":{s:"구역전기사업자의 전력시장 거래에 대한 정산",f:"구역전기사업자: 35MW 이하, 특정 구역 직접 공급\n\n정산:\n① 전력량: 잉여전력 판매 시 SMP 기반 정산\n② 가용능력: 용량가격 기반 정산\n③ 부가정산금\n\n중앙급전 구역전기발전기:\n별도 정산 기준 적용\n• 시간대별 구역수요 초과 공급가능용량 산정\n• 실 공급가능용량 산정\n• 급전지시 이행 검증",c:"trade",d:2,r:["구역전기사업","정산"]},
"예방정비":{s:"발전기 정기 점검·보수를 위한 계획 정지",f:"예방정비 일정 변경 시 정산:\n\n가. 일반발전기(수력·양수 제외):\n   정비일정 변경에 따른 손실/이득 정산\n\n나. 복합·수력발전기:\n   별도 산정 기준 적용\n\n다. 양수발전기:\n   양수특성 고려한 별도 정산\n\n발전기정비관리시스템:\n전력거래소가 연간/월간/주간 정지계획 수립에 사용",c:"trade",d:2,r:["정산","발전계획"]},
"재생에너지직접전력거래":{s:"전력시장 거치지 않고 재생에너지를 직접 거래",f:"전기사업법 제16조의5에 근거\n\n재생에너지전기공급사업자 → 전기사용자 직접 공급\n\n직접전력거래계약: 공급자-사용자 간 계약\n\n비계통연계 직접전력거래:\n송전/배전 설비와 연결되지 않은 발전기 활용\n\n직접전력거래비율:\n시간대별 거래량 중 직접전력거래 공급 비율\n\n정산:\n별표2 제Ⅰ-1-사(직접전력거래 발전기) 적용\n별표2 제Ⅶ(직접전력거래 부가정산금) 적용",c:"trade",d:2,r:["직접PPA","정산"]},
"수소발전입찰시장":{s:"수소발전 계약전력량 거래를 위한 시장",f:"전력시장운영규칙 제17장에 근거\n\n수소발전입찰시장 계약발전기:\n별표2 제Ⅰ-1-아에 따라 정산\n\n차액계약정산:\n별표2 제17항에 따른 계약전력량 차액 정산\n\n판매사업자·구역전기사업자에도\n수소발전입찰시장 관련 정산 적용",c:"trade",d:2,r:["정산","전력시장운영규칙"]},
"전력시장감시":{s:"전력시장의 공정성·효율성을 감시하는 제도",f:"전력시장운영규칙 제6장\n\n전력시장감시위원회:\n시장 감시 총괄\n\n감시절차:\n① 시장 모니터링\n② 이상 거래 감지\n③ 조사 및 제재\n④ 감시결과 보고\n\n자율시정조치: 사업자 스스로 시정\n직권시정조치: 전기위원회가 직접 시정 명령\n\n시정조치 요구 → 조치결과 보고서 제출",c:"law",d:2,r:["전력시장운영규칙","전력거래소"]},
"분쟁조정":{s:"전력거래 관련 분쟁을 조정하는 제도",f:"전력시장운영규칙 제7장\n\n분쟁조정위원회:\n위원장 포함 구성\n\n분쟁조정 절차:\n① 분쟁조정 신청서 제출\n② 위원회 심의\n③ 조정안 제시\n④ 수락/불복 결정\n\n불복 시: 별도 불복 절차 진행\n\n분쟁조정 비용: 부록 1에 예납 기준 명시",c:"law",d:2,r:["전력시장운영규칙"]},
"정보공개":{s:"전력시장 관련 정보의 공개 제도",f:"전력시장운영규칙 제8장\n\n정보공개위원회:\n정보 공개 심의·결정\n\n정보보호:\n사업자 영업비밀 등 보호 대상 정보 관리\n\n정보공개 신청:\n정보공개 신청서 → 위원회 심의 → 결과 통지\n\n정보공개 목록표: 공개 대상 정보 목록 관리",c:"law",d:2,r:["전력시장운영규칙"]},
"규칙개정":{s:"전력시장운영규칙의 개정 절차",f:"전력시장운영규칙 제9장\n\n규칙개정위원회:\n규칙 개정 심의\n\n개정 절차:\n① 개정제안서 제출\n② 위원회 심의\n③ 결과 통지\n\n최초 제정: 2001.3.30\n2024.2.13까지 수십 차례 부분개정\n\n전기사업법 제43조에 근거한 규칙",c:"law",d:2,r:["전력시장운영규칙","전기사업법"]},
"조상설비":{s:"전력계통의 무효전력을 공급/소비하여 적정 전압 유지",f:"종류:\n• 분로리액터: 무효전력 소비 (과전압 방지)\n• 캐패시터: 무효전력 공급 (저전압 방지)\n• SVC(정지형무효전력보상기): 자동 조정\n• 동기조상기: 회전기식 무효전력 보상\n\n역할: 계통 전압 안정성 유지\n보조서비스(무효전력 보상) 항목에 해당",c:"grid",d:2,r:["보조서비스","전력계통"]},
"성과연동형용량가격계수":{s:"발전기 성과를 반영하여 용량가격을 차등 지급하는 계수",f:"발전기여도 산정 요소:\n\n① 기준발전기여도: 이용률 기반\n② 운전기여도: 제약입찰량 초과운전 + 계통제약운전 평가\n③ 응동유연성기여도: 기술특성자료 평가\n④ 기동기여도: 기동횟수 평가\n\n목적:\n계통기여도가 높은 발전기에 더 많은 용량정산금 지급\n→ 발전기 운영 효율성 제고 유인",c:"mkt",d:3,r:["용량정산금","기준용량가격","용량가격계수"]},
"제3자간전력거래":{s:"발전사업자→전기판매사업자→전기사용자 직접 공급 거래",f:"전기사업법 시행령 제19조 제1항 제3호\n\n발전사업자가 생산한 전력을 전기판매사업자에게 직접 공급\n전기판매사업자가 특정 전기사용자에게 공급\n\n산업통상자원부장관이 정한 요건 충족 필요\n\n2024.2.13 신설",c:"trade",d:2,r:["직접PPA","판매사업자"]},
"전력거래시스템":{s:"전력거래를 위한 전산 시스템 인프라",f:"전력시장운영규칙 제10장\n\n전력거래소 설비:\n• 시장시스템 (별표 22)\n• 계통운영시스템 (별표 13)\n• 발전기정비관리시스템\n• 제주 신재생예측시스템\n\n발전사업자·송전사업자 설비:\n• 원격감시·제어 설비\n• 데이터 통신 설비\n\n정보보안정책 수립 의무",c:"trade",d:2,r:["전력거래소","전력시장운영규칙"]},
"정부승인차액계약":{s:"정부가 승인한 발전사업자와의 전력거래 차액계약",f:"전력시장운영규칙 제13장\n\n차액계약운영위원회:\n계약 운영 총괄\n\n처리 절차: 별표 30\n\n정부승인차액계약의 정산상한가격:\nRPS 고정가격계약 발전기에 적용",c:"trade",d:2,r:["정산","전력시장운영규칙"]},
"재생에너지발전량예측제도":{s:"재생에너지 발전량을 사전 예측·제출하는 제도",f:"전력시장운영규칙 제14장\n\n참여자원 조건·구성: 제2절\n시험 및 등록: 제3절\n예측발전량 제출·예측오차율 산정: 제4절\n정산: 제5절\n\n예측제도 참여자 정산:\n별표2 제Ⅴ(예측제도 참여자에 대한 정산)\n\n직접구매자·판매사업자·구역전기사업자도\n예측제도 참여자의 대상자원 전력거래량 정산 적용",c:"trade",d:2,r:["수요반응","전력수요예측"]},
"저탄소전원중앙계약시장":{s:"저탄소 전원의 중앙계약 방식 거래 시장",f:"전력시장운영규칙 제15장\n\n시장 개설 및 운영: 제2절\n발전기 운영 및 결제: 제3절\n중앙계약시장위원회: 제4절\n실무협의회: 제5절\n\n저탄소 전원 확대를 위한 계약 시장 운영",c:"mkt",d:2,r:["전력시장운영규칙","정산"]},
"제주시범사업":{s:"전력시장 제도개선을 위한 제주 시범사업",f:"전력시장운영규칙 제16장\n\n급전가능재생에너지자원 관리기준\n발전입찰과 전력수요예측\n발전계획 및 가격결정\n정산: 별표 33에 따른 별도 정산기준\n발전계획 수립: 별표 34\n\n제주지역 SMP 별도 산정\n제주지역 발전기 기준용량가격 별도 적용",c:"mkt",d:2,r:["계통한계가격","재생에너지발전량예측제도"]},
"공급인증서거래시장":{s:"REC 거래를 위한 시장",f:"전력시장운영규칙 제11장\n\n거래시장 운영: 제1절\n의무이행비용 정산: 제2절\n\n운영·정산·결제 절차: 별표 25\n\n전기소비자 구매 시장:\n• 장외거래시장: 연중 개설\n• 플랫폼거래시장: 매월 1·3째주 금요일 10~16시",c:"mkt",d:2,r:["공급인증서","RPS제도"]},
"대체연료정산":{s:"대체연료 사용 발전기에 대한 별도 정산",f:"별표2 제8항\n\n주연료 대신 대체연료 사용 시\n변동비 차이를 반영한 정산\n\n대체연료 사용에 따른 추가비용/절감 반영",c:"trade",d:3,r:["전력량정산금","열량단가"]},
"지역자원시설세":{s:"화력발전기에 부과되는 지방세의 정산",f:"별표2 제12-차항\n\n화력발전기에 대한 지역자원시설세를\n전력거래 정산에 반영\n\n2016.5.12 신설",c:"trade",d:3,r:["정산","부가정산금"]},
"허용오차":{s:"ε — 발전기 출력 허용 편차 (AGC: ±1%, 기타: ±0.5%)",f:"별표2 정산에서 계량전력량과 공급가능용량 비교 시 적용하는 허용오차\n\n주파수추종/AGC 운전 발전기: RAi,t × 0.01\n기타 발전기: RAi,t × 0.005\n\n최소허용오차: 0.5MW\n최대허용오차: 5MW\n\nMEP 공식에서 Min(MGOi,t, RAi,t+ε)에 적용\n→ 허용오차 이내 초과발전은 정산 인정\n\n2023.9.26 개정",c:"trade",d:3,r:["전력량정산금","공급가능용량"]},
"열전비":{s:"HRi — 열공급 발전기의 열·전기 생산비율",f:"Heat-to-Power Ratio\n\n열병합발전기가 열과 전기를 동시 생산할 때의 비율\n\n변동비보전정산금(MWP) 산정에서:\n열제약운전발전기의 무부하비 계산에 활용\n\nHMWPi,t 산정 시:\nNLPCi × 1/(1+HRi) × MGOi,t/RAi,t\n\n열전비가 높을수록 열 생산 비중이 큼\n→ 전기 생산 효율과 반비례 관계",c:"trade",d:3,r:["변동비보전정산금","복합발전기"]},
"효율보정계수":{s:"EAf — 전기단독모드↔열병합모드 변동비 변환 계수",f:"별표2 제Ⅰ-1-가 ②항\n\n전기단독모드(모드-III) 변동비를\n열병합모드(모드-I) 변동비로 변환하는 계수\n\n제약사유 1번(열제약)으로 운전 중\n급전지시로 열제약운전요구량 초과 시:\nSMWPi,t = Max(SCMWGi,t × EAfi - MPMWGi,t, 0)\n\n열병합발전기 특유의 정산 보정 장치",c:"trade",d:3,r:["변동비보전정산금","열전비"]},
"감축전력량정산금":{s:"MAP — 발전계획량 미달 시 기대이익 보전 정산",f:"Marginal Adjustment Payment\n\n하루전발전계획에 포함되었으나 전력거래소 지시로 감축한 전력량에 대해\n발전계획량으로 발전 시 기대이익을 정산\n\nMAPi,t = Max{MPMAGi,t - SCMAGi,t - LOCMAGi,t, 0}\n\nMPMAG: 미발전 전력량의 시장가격 정산금\nSCMAG: 미발전 전력량의 연료비\nLOCMAG: 예비력용량가치 정산금\n\n예외:\n• MGOi,t ≥ Min(DAOSi,t, RAi,t)이면 MAP = 0\n• 고정출력발전기: 허용오차 내 미달 시 MAP = 0\n• 하한제약발전기: 별도 조건",c:"trade",d:3,r:["전력량정산금","하루전발전계획","부가정산금"]},
"초과발전정산":{s:"CON — 수력·양수의 발전계획 초과발전에 대한 정산",f:"별표2 수력발전기 ②항\n\n전력거래소 지시로 총발전계획량 초과 발전 시:\n초과 전력량 = 거래일 최고MP + 기준용량가격으로 정산\n\nCONi = Max{XESOi × (MaxMP + RCPi × RCFi × FSFi) × 1000,\n         REOEi × RCPi × RCFi × FSFi × 1000}\n\nXESOi: 전력거래소 지시 초과발전 실제 전력량\nREOEi: 발전계획량 변경분\n\n수력·양수발전기에 적용되는 고유 정산방식",c:"trade",d:3,r:["전력량정산금","양수발전기"]},
"1차주파수제어서비스":{s:"GF(Governor Free) — 조속기 자동 주파수 응동",f:"PCR(Primary Control Reserve)\n\n정산 공식:\nPCRSPi = Σt PCRQi,t × SDWFi × DBWFi × PCRP × 1000\n\nPCRQi,t: 1차주파수제어 공급량\n  = Σm PRSCi,m / 60 (EMS에서 1분 단위 취득)\nSDWFi: 속도조정률 가중치\nDBWFi: 불감대 가중치\nPCRP: 1차주파수제어 정산단가\n\n속도조정률 2%이하: SDWF=1.075\n속도조정률 8%초과: SDWF=0.8\n\n불감대 ±0.04%이하: DBWF=1.05\n불감대 0.06%초과: DBWF=0.0 (사실상 자격 없음)\n\n중앙급전전기저장장치도 동일 기준 준용",c:"grid",d:3,r:["보조서비스","2차주파수제어서비스"]},
"2차주파수제어서비스":{s:"AGC(Automatic Generation Control) — 자동발전제어",f:"SCR(Secondary Control Reserve)\n\n정산 공식:\nSCRSPi = Σt (SCRQi,t × CAWFi,t × CPWFi + FRQi,t) × SCRP × 1000\n\nSCRQi,t: 2차주파수제어 공급량\n  = Σm {Max(SUPPi,m, 0) + Max(-SUPPi,m, 0)} / (2×60)\nSUPPi,m: AGC 제어요청에 따른 상향/하향 발전량\n\nCAWFi,t: 제어가용률 가중치\n  가용률 90%초과: CAWF=1.0\n  가용률 80~90%: CAWF=0.9\n  가용률 70~80%: CAWF=0.8 등\n\nCPWFi: 제어성과 가중치\n  제어성과 90%초과: CPWF=1.0\n  제어성과 80~90%: CPWF=0.9 등\n\nFRQi,t: 주파수제어예비력 공급량",c:"grid",d:3,r:["보조서비스","1차주파수제어서비스"]},
"3차예비력정산금":{s:"TRASP — 대기예비력 투입에 대한 정산금",f:"Tertiary Reserve Ancillary Service Payment\n\n정산 공식:\nTRASPi,t = Max[(TPCi,t - MPi,t) × TRQi,t × 1000, 0]\n\nTPCi,t: 발전기 변동비\nMPi,t: 시장가격\nTRQi,t: 3차예비력 공급량\n  (급전지시로 투입된 예비력, MWh)\n\n3차예비력 = 대기예비력\n10분/30분 이내 투입 가능한 예비력\n\n변동비가 시장가격보다 높은 경우에만 정산\n→ 변동비 미회수분 보전",c:"grid",d:3,r:["보조서비스","예비력"]},
"속응성자원정산금":{s:"QSRASP — 빠른 응동 자원에 대한 추가 정산금",f:"Quick Start Resource Ancillary Service Payment\n\nQSRASPi,t = Max[(TPCi,t - MPi,t) × QSRQi,t × 1000, 0]\n\nTPCi,t: 발전기 변동비\nMPi,t: 시장가격\nQSRQi,t: 속응성자원 급전량\n  (급전지시로 투입된 속응성 자원)\n\n빠른 기동·출력 변경이 가능한 발전자원\n(예: 가스터빈, ESS 등)\n\n변동비가 시장가격보다 높은 경우 차액 보전",c:"grid",d:3,r:["보조서비스","3차예비력정산금"]},
"자체기동서비스정산":{s:"Black Start — 외부 전원 없이 발전기 기동 서비스",f:"별표2 제Ⅰ-9-가 4)\n\n정산 공식:\nBSSPi = BSPi × BSQi × BSFi × 1000\n\nBSPi: 자체기동 정산단가\nBSQi: 자체기동 능력(MW)\nBSFi: 운전가능 여부 표시기\n  (시험검사 합격 시 1, 불합격 시 0)\n\n불이행 시:\n① 설비점검 등으로 운전 불가 → 동일 특성 발전기 대체\n② 2대 이상 지정 → 모든 발전기 합격 필요\n③ 비상발전기 정비 → 자체기동능력 미보유 시 불이행",c:"grid",d:3,r:["보조서비스","비상상황"]},
"예비력용량가치":{s:"LOCRQ — 예비력 공급에 대한 용량가치 정산",f:"Loss of Capacity Reserve Quantity\n\n정산 공식:\nLOCRSPi,t = LOCRQi,t × LOCRHF × 1000\n\nLOCRQi,t: 예비력용량가치 공급량\n  = Max{Min(RAi,t, Ai,t) - Max(DAOSi,t, MGOi,t), 0}\n\nLOCRHF: 예비력용량가치 정산단가\n  = Min(LOCRB / Σ LOCRQi,t, RCP × RCFmax)\n\nLOCRB: 예비력용량가치 예산 총액\n\n감축전력량정산(MAP) 산정 시에도 활용:\nLOCMAGi,t = LOCRHF × Max{LOCRQi,t - RAi,t + Min(RAi,t, DAOSi,t), 0}\n\n2021.9.18 신설",c:"grid",d:3,r:["보조서비스","예비력","감축전력량정산금"]},
"직접구매용량가격":{s:"CPC — 직접구매자에게 적용하는 용량가격",f:"CPC = HCFi,t × CFCP\nHCFi,t = RCPi × RCFi × TCFt × PCFi\n\nRCPi: 육지 전체 발전기 기준용량가격의\n설비용량 가중평균 (제주는 제주 발전기 가중평균)\n\nRCFi: 가장 인접한 중앙급전발전기의 RCF 적용\nTCFt: 시간대별 용량가격계수\nPCFi: 직접구매자는 1 고정\nCFCP: 직접구매자 용량보정계수\n\n직접구매용량보정계수:\n= 연간 평균입찰용량 / 연간 최대부하",c:"trade",d:3,r:["직접구매자","용량정산금","기준용량가격"]},
"역률조정계수":{s:"PFC — 직접구매자의 역률에 따른 용량정산금 조정",f:"PFCk,t = 1 + Max(0.9 - PFk,t, 0)\n\nPFk,t: 직접구매자의 역률(Power Factor)\n\n역률 0.9 이상: PFC = 1.0 (추가 부담 없음)\n역률 0.9 미만: PFC > 1.0 (추가 부담 발생)\n\n예시:\n• 역률 0.85 → PFC = 1.05 (5% 추가)\n• 역률 0.80 → PFC = 1.10 (10% 추가)\n\n역률이 낮으면 무효전력 소비 증가\n→ 계통 부담 반영 목적",c:"trade",d:3,r:["직접구매자","직접구매용량가격"]},
"유효구매전력량":{s:"PEC — 직접구매자의 손실 반영 보정 구매전력량",f:"PECk,t = Max{(MECk,t - ASRSk,t), 0} × TLFk,t × (1+DLFC) × (1+LLFCk)\n\nMECk,t: 직접구매자 계량전력량\nASRSk,t: 직접전력거래 공급량\nTLFk,t: 손실계수\nDLFC: 배전손실률\nLLFCk: 선로손실률\n\n직접전력거래 공급분은 유효구매전력량에서 제외\n\n전력량 정산금:\nESCk,t = Min(SMPt, PC) × PECk,t × 1000",c:"trade",d:3,r:["직접구매자","전력량정산금","송전손실계수"]},
"부가정산금단가":{s:"UPR — 부가정산금 배분을 위한 단가 (원/kWh)",f:"Uplift Price\n\n부가정산금단가 = 부가정산금 총액 / 전력거래량\n\n직접구매자 부가정산금:\nUSCk,t = USt × PECk,t / (TETt - Σ PECk,t)\n\n판매사업자 부가정산금:\nUSSt = USt - Σ USCk,t - Σ USRk,t\n\n부가정산금 총액(USt):\nUSt = Σ TPGi,t - Σ MEPi,t - Σ TPCPi,t\n\nTPG: 발전기별 총정산금\nMEP: 전력량정산금\nTPCP: 용량정산금\n\n직접전력거래 부가정산금단가(UPR) 별도 산정",c:"trade",d:3,r:["부가정산금","직접구매자","판매사업자"]},
"구역수요초과공급가능용량":{s:"AL — 구역전기사업자의 전력계통 공급가능 용량",f:"ALi,t = GCLi,t × (1 - MLFLi) - EDLi,t\n\nGCLi,t: 중앙급전 구역전기발전기 입찰 발전가능용량\n  (주변압기 2차측 기준)\nMLFLi: 변압기 손실계수 (154kV: 0.765%)\nEDLi,t: 공급구역 예상수요\n\n실제 공급가능용량:\nAALi,t = Max{GCLi,t × (1-MLFLi) - MDLi,t, 0}\n\nMDLi,t: 실제 구역수요\n= MSGLi,t × (1-MLFLi) + MELd,t × (1+LLFLd) - MGOi,t\n\n초과입찰량에 대해 위약금 산정\n급전지시 이행 검증 기준 존재",c:"trade",d:3,r:["구역전기사업자정산","공급가능용량"]},
"양수동력변동비":{s:"양수(충전) 시 소비한 전력에 대한 변동비 산정",f:"별표2 제14항\n\n양수동력변동비 = 양수전력량 × 양수동력단가\n\n양수동력단가 산정:\n양수계획량 이내: 양수계획시간대 SMP 가중평균\n양수계획량 초과: 초과분 × 별도 산정\n\n정산:\n① 계획량 이내 양수: 양수계획시간대 가중평균 SMP\n② 초과 양수: 초과분 × 양수시간 최저 SMP\n③ 미달 양수: 미양수분 × 정산 = 0",c:"trade",d:3,r:["양수발전기","전력량정산금"]},
"충전전력변동비":{s:"전기저장장치(ESS) 충전 시 전력의 변동비 산정",f:"별표2 제14.1항 [신설 2016.5.12]\n\n충전전력변동비 산정:\n= 충전전력량 × 충전단가\n\n산정절차는 양수동력변동비 산정절차를 준용\n\n충전전력 정산:\n실제 계량된 충전전력량에 대한 비용정산\n\n충전계획량 기준:\n• 이내: 가중평균 SMP\n• 초과: 별도 산정",c:"trade",d:3,r:["전기저장장치","양수동력변동비"]},
"다조합복합발전기":{s:"2기 이상 GT + 1기 ST로 구성된 복합발전기",f:"별표2 제16항 [2026.1.1 시행예정]\n\n운전조합 판단기준:\n① GT·ST 개별계량 가능 → 계량데이터로 판단\n② 개별계량 불가 → EMS RTU 데이터로 판단\n③ 호기별 운전여부로 운전조합 결정\n\n정산 특수성:\n• 기동비용: GT기동비 + ST기동비 각각 산정\n  SUAPi = Max{GSUCi×(GNSUAi-GNSUSi), 0}\n        + Max{SSUCi×(SNSUAi-SNSUSi), 0}\n\n• 변동비보전: 운전조합별 비용계수 적용\n  QPCi,x,t / LPCi,x,t / NLPCi,x,t\n\n• GT모드 변동비: 별도 입출력 특성계수 적용",c:"grid",d:3,r:["복합발전기","기동비용조정정산금"]},
"기동대기발전기정산":{s:"계통연결 대기 중인 발전기에 대한 비용 정산",f:"별표2 제12-가항\n\n기동대기비용:\nSUSBCi,t = SUCi / SUHi × STHi,t\n\nSUCi: 기동비용\nSUHi: 기동소요시간\nSTHi,t: 기동대기 시간\n\n다조합 복합발전기:\nSUSBCi,t = (GSUCi/GSUHi × GTHi) + (SSUCi/SSUHi × STHi)\n\nGTHi: GT 기동대기 소요시간\nSTHi: ST 기동대기 소요시간\n\n입찰량 초과 급전지시 발전기도 별도 정산",c:"trade",d:3,r:["기동비용조정정산금","부가정산금"]},
"계통연결지연":{s:"급전지시 허용시간 초과 시 공급가능용량 조정",f:"별표2 제13-라항\n\n허용시간 이내 계통연결: SDFi,t = 0\n  → ARAi,t = RAi,t (정상)\n\n허용시간 초과 계통연결 지연: SDFi,t = 1\n  → ARAi,t = MGOi,t (실제 발전량으로 조정)\n\n계통분리 지연도 유사:\n허용시간 초과: DSDFi,t = 1\n→ AMGOi,t = 0 (발전량 0으로 조정)\n\n조기 계통연결/분리도 별도 규정",c:"trade",d:3,r:["급전지시","전력량정산금"]},
"전력거래차수":{s:"전력거래 대금지급의 차수별 일정",f:"별표2 제Ⅵ항\n\n전력거래 대금 지급은 차수별로 진행\n\n정산 → 통지서 발행 → 청구서 → 결제\n\n전력거래전담 금융기관을 통한 대금 이체\n\n채무불이행 시:\n• 통지서 발송\n• 거래정지 통지\n• 연체이자 부과",c:"trade",d:2,r:["결제","정산"]},
"예측오차정산":{s:"재생에너지 발전량 예측오차에 따른 정산",f:"별표2 제Ⅴ항 [신설 2020.10.1]\n\n예측오차율에 따라 인센티브/페널티 정산\n\n주요자원 예측발전량:\nFGMi,n,t = FGSi,n,t × SVFi,t + FGWi,n,t × WVFi,t\n\nFGS: 태양광 예측발전량\nFGW: 풍력 예측발전량\nSVF: 태양광 가중치\nWVF: 풍력 가중치\n\n예측오차율 산정 후\n일정 범위 이내: 인센티브\n일정 범위 초과: 페널티\n\n직접구매자·판매사업자·구역전기사업자도\n예측제도 참여자 대상자원 전력거래량 정산",c:"trade",d:3,r:["재생에너지발전량예측제도","정산"]},
"차액계약정산":{s:"수소발전입찰시장 계약전력량에 대한 차액 정산",f:"별표2 제17항 [신설 2023.8.30]\n\n수소발전입찰시장 계약발전기의\n계약가격과 시장가격의 차액을 정산\n\n계약전력량 초과/미달 판단:\n연간계약전력량 대비 실적 비교\nACGi: 연간 계약전력량\nΣ MGOi,h: 누적 발전전력량\n\n판매사업자·구역전기사업자에도 적용\n(별표2 제Ⅲ-8, 제Ⅳ-8항)",c:"trade",d:3,r:["수소발전입찰시장","정산"]},
"LNG약정물량정산":{s:"LNG 약정물량 허용오차 초과 시 부가금 정산",f:"별표2 제12-바항 [신설 2009.12.31]\n\nLNG 약정물량 허용오차를 초과하여\n부가금이 발생한 경우 정산\n\n발전사업자의 연료 관리와 관련된 특수 정산",c:"trade",d:3,r:["부가정산금","전력량정산금"]},
"열공급기동비":{s:"열공급 목적 발전기 기동 시 기동비 일부 지급",f:"별표2 제12-자항 [신설 2016.5.12]\n\n열공급을 위해 발전기가 기동하는 경우\n기동비의 일부를 지급\n\n열병합발전기의 열 공급 의무와\n전력시장 운영의 조화를 위한 장치",c:"trade",d:3,r:["기동비용조정정산금","열전비"]},
"복합발전기효율차이정산":{s:"계통제약운전 중 복합발전기 효율차이 추가 정산",f:"별표2 제12-사항 [신설 2016.5.12]\n\n복합발전기가 계통제약운전 중\nCC모드와 실제 운전모드 간 효율차이로\n추가 정산금이 발생하는 경우\n\n별도 산정 기준에 따라 정산\n\n긴급정산상한가격 시행에 따른\n복합발전기 추가정산금도 별도 존재 [신설 2023.5.3]",c:"trade",d:3,r:["복합발전기","변동비보전정산금"]},
"비상대기예비력정산":{s:"ECR — 기후·환경 제약 석탄발전기의 예비력 정산",f:"ECRP (Emergency Capacity Reserve Payment)\n별표2 제12-카항 [신설 2020.12.1]\n\n기후·환경제약(가동중단, 상한제약 등)으로\n비상대기예비력을 입찰한 석탄발전기에 대한 정산\n\n미세먼지·온실가스 등 환경 규제와\n전력수급 안정성 간 균형을 위한 제도\n\n부가정산금단가 산정 시 ECR 정산금 포함",c:"trade",d:3,r:["예비력","부가정산금"]},
"긴급정산상한가격연료비보전":{s:"긴급정산상한가격 적용 시 비중앙급전발전기 연료비 보전",f:"별표2 제12-타항 [신설 2022.11.30]\n\n긴급정산상한가격 적용으로\n비중앙급전발전기 등의 연료비가\n시장가격으로 회수되지 못하는 경우 보전\n\n직접구매자·판매사업자·구역전기사업자에도\n동일한 보전 정산 적용\n(별표2 제Ⅱ-6, 제Ⅲ-7, 제Ⅳ-7항)",c:"trade",d:3,r:["긴급정산상한가격","비중앙급전발전기","정산"]},
"직접전력거래부가정산금":{s:"직접전력거래 관련 부가정산금 산정",f:"별표2 제Ⅶ항 [신설 2022.5.31]\n\n직접전력거래 부가정산금 산정 기준\n직접전력거래 부가정산금단가(UPR) 산정\n\nUPR = (TUC - Σ LPTi,t - Σ ECRPi,t) /\n      (Σ TETt - Σ SRCk,t - TESC)\n\nTUC: 부가정산금 총액\nLPT: 지역자원시설세 정산금\nECRP: 비상대기예비력 정산금\nTET: 총전력거래량\nSRC: 직접전력거래 전력량\nTESC: 판매사업자 PPA 계약 발전량",c:"trade",d:3,r:["재생에너지직접전력거래","부가정산금단가"]},
"판매사업자가용능력정산":{s:"CSS — 판매사업자의 용량가격 부담 정산",f:"판매사업자 가용능력 정산금:\nCSSt = Σ TPCPi,t - Σ CSCk,t - Σ CSLd,t\n\nTPCPi,t: 전력시장 발전기 용량정산금\nCSCk,t: 직접구매자 용량가격 정산금\nCSLd,t: 구역전기사업자 용량가격 정산금\n\n판매사업자 구매전력량:\nPESt = TETt - Σ PECk,t - Σ PELd,t\n\n판매사업자(한전)가 전력시장 용량정산의\n잔여분을 부담하는 구조",c:"trade",d:3,r:["판매사업자","용량정산금"]},
"수력발전기정산":{s:"수력발전기의 고유 정산 방식",f:"별표2 제Ⅰ-1-나\n\n① 발전계획량 이내 실제 발전:\n가중평균MP × Min(계획량, 변경계획량, 계량량)\n\n② 초과 발전(전력거래소 지시):\n최고MP + 기준용량가격 + RCF\n\n③ 미달 발전(전력거래소 지시):\n정산 없음 (COFFi = 0)\n\n용량정산금:\nTPCPi,t = Min(EGWi,t, REGWi,t) × (HCFi,t + β) × 1000\nHCFi,t = RCPi × RCFi × TCFt × PCFi\n\n일반발전기와 달리 '가중평균MP' 방식 적용",c:"trade",d:3,r:["전력량정산금","용량정산금","양수발전기"]},
"비중앙급전발전기정산":{s:"비중앙급전발전기·ESS의 전력량 정산 방식",f:"별표2 제Ⅰ-1-마\n\n① 계량전력량 정산:\nMEPi,t = Min(SMPt, PC, EPCx) × TLFi,t × MGOi,t × 1000\n\n간소화된 공식:\n변동비(GP) 고려 없이 SMP·정산상한가격·긴급정산상한 중 최솟값\n\n비중앙급전전기저장장치도 유사 방식\n\n② 변동비보전: 열제약/계통제약 구분 동일\n\n③ 발전계획 미달 정산(MAP): 일반발전기와 동일 구조\n\n긴급정산상한가격 적용 시 별도 연료비 보전",c:"trade",d:3,r:["비중앙급전발전기","전력량정산금","긴급정산상한가격연료비보전"]},
"중앙급전구역전기발전기정산":{s:"중앙급전 구역전기발전기의 전력량 정산",f:"별표2 제Ⅰ-1-바 [신설 2019.1.2]\n\n구역수요 초과분에 대해 일반발전기 유사 정산\n\n전력량정산:\nMEP = MP × Min(계량량, 구역수요초과공급가능용량+ε) × 1000\n\n구역수요 이내 발전분: 자체 소비\n구역수요 초과분: 전력시장 정산 대상\n\n정산관련 기준 산정 (별표2 제15항):\n• 시간대별 구역수요 초과 공급가능용량\n• 실 공급가능용량 (초과입찰 위약금)\n• 급전지시 이행 검증기준",c:"trade",d:3,r:["구역전기사업자정산","구역수요초과공급가능용량"]},
"직접전력거래발전기정산":{s:"직접전력거래 발전기의 전력량 정산",f:"별표2 제Ⅰ-1-사 [신설 2021.12.28]\n\n직접전력거래 발전기(재생에너지)의 정산\n\n직접전력거래비율:\n시간대별 거래량 중 직접전력거래 공급 비율\n\n전력시장 거치지 않는 부분: 직접 계약 정산\n전력시장 거치는 부분: 일반 정산 적용\n\n부가정산금: 별표2 제Ⅶ항(직접전력거래 부가정산금)",c:"trade",d:3,r:["재생에너지직접전력거래","전력량정산금"]},
"수소발전계약발전기정산":{s:"수소발전입찰시장 계약발전기의 전력량 정산",f:"별표2 제Ⅰ-1-아 [신설 2023.8.30]\n\n수소발전입찰시장 계약발전기의 전력량정산\n\n차액계약정산:\n계약가격과 시장가격의 차액 보전\n\n연간계약전력량 이행 관리:\nACGi: 연간 계약전력량\nΣ MGOi,h: 누적 발전전력량\n\n비이행 시 별도 제재 가능",c:"trade",d:3,r:["수소발전입찰시장","차액계약정산"]},
"시운전전력정산":{s:"시운전발전기의 전력 거래 정산 방식",f:"별표2 제7항\n\n상업운전개시 전 시운전 발전기에 대한 정산\n\n시운전 전력의 정산:\n시운전발전기 등록 후 발전한 전력량에 대해\n별도 기준으로 정산\n\n사용전검사 완료·상업운전개시 신고 전까지 적용",c:"trade",d:2,r:["시운전발전기","전력량정산금"]},
"입찰량초과급전정산":{s:"공급가능용량 초과 급전지시 시 별도 정산",f:"별표2 제12-나항\n\n재선언 공급가능용량 이상으로 급전지시한 경우\n초과 발전 전력량에 대해 별도 정산\n\n급전지시량 산정:\nXEOGAi,t = Max(EOSOi,t - RAi,t, 0)\n\nXSOFi,t = 1: 초과급전지시 표시기\nEOSOi,t: 초과급전지시에 의한 실제 발전량\n\n초과분에 대해 변동비 기반 추가 정산",c:"trade",d:3,r:["급전지시","전력량정산금","부가정산금"]}

};

// ── 비교표 ──
const COMPS=[
{t:"시장 구조 비교",h:["구분","공급자 수","상품","가격 결정","진입·퇴출"],r:[
["완전경쟁","다수","동질","시장가격(수용)","자유"],
["독점","1개","대체재 없음","가격설정","진입장벽"],
["과점","소수","동질/차별","전략적 상호의존","제한적"],
["독점적경쟁","다수","차별화","가격차별화","자유"]]},
{t:"전력시장 핵심 개념",h:["구분","설명","관련 규정"],r:[
["CBP","변동비 반영 풀시장","전력시장운영규칙"],
["SMP","계통한계가격(시장가격)","전력시장운영규칙 제2장"],
["CP","용량정산금(고정비 보상)","전력시장운영규칙 별표2"],
["REC","공급인증서","신재생에너지법"],
["RPS","신재생 공급의무화","신재생에너지법"]]},
{t:"전력 수요예측 기법 비교",h:["기법","특징","장단점"],r:[
["이동평균법","일정 기간 관측값 단순 평균","간단하나 급변 대응 어려움"],
["ARIMA","자동회귀 누적 이동평균","시계열 최적합, 특수 이벤트 취약"],
["회귀분석","인과형 모형","변수 관계 파악, 비선형 한계"],
["신경회로망","AI/데이터마이닝","비선형 가능, 결과 설명 불가"],
["LSTM","RNN 기울기 소실 보완","시계열 장기의존 학습 우수"]]},
{t:"송전 방식 비교",h:["구분","교류(AC)","직류(HVDC)"],r:[
["승압·강압","변압기로 용이","어려움"],
["송전효율","상대적 낮음","높음"],
["유도장해","있음","작음"],
["계통 연계","주파수 동일 시만","용이"],
["한국 사례","345kV/765kV","제주 HVDC, 북당진-고덕"]]},
{t:"전기사업자 종류",h:["사업자","주요 역할","비고"],r:[
["발전사업자","전기 생산→전력시장 공급","6개 발전공기업 + 민간"],
["송전사업자","송전설비 설치·관리","한전"],
["배전사업자","수용가 배전설비 운용","한전"],
["전기판매사업자","전기사용자에 전기 공급","한전 독점"],
["구역전기사업자","특정 구역 직접 공급","35MW 이하"]]}
,

{t:"발전기 유형별 전력량 정산 비교",h:["발전기 유형","정산 기본 공식","특이사항"],r:[
["일반발전기","MEP = MP × Min(MGO, RA+ε) × 1000","SMP·정산상한가격·변동비 중 적용"],
["수력발전기","유사 구조, 수력 특성 반영","양수와 구별"],
["양수발전기","방전정산 + 양수동력 별도정산","양수계획량 기준 초과/미달 정산"],
["중앙급전ESS","방전: MEP / 충전: 충전변동비","실효용량비율 적용"],
["비중앙급전","계량×Min(SMP,PC,EPC)×TLF","변동비 비교 없음, 단순 구조"],
["구역전기발전기","구역수요 초과분 별도 정산","실 공급가능용량 산정"],
["직접전력거래","별표2 Ⅰ-1-사 적용","2021.12.28 신설"],
["수소발전계약","차액계약정산 방식","2023.8.30 신설"]]},

{t:"보조서비스 종류 비교",h:["서비스","내용","응동 시간","정산"],r:[
["1차 주파수제어(GF)","조속기 자동 응동","수초 이내","속도조정률 기반"],
["2차 주파수제어(AGC)","자동발전제어","수십초~수분","AGC 운전 발전기 정산"],
["3차 주파수제어","대기예비력 투입","10분/30분","예비력용량가치 정산"],
["무효전력 보상","전압 유지 서비스","즉시","무효전력 정산"],
["자체기동(Black Start)","외부 전원 없이 기동","—","자체기동 정산"]]},

{t:"예비력 종류 비교",h:["구분","종류","내용","시간"],r:[
["상향","공급예비력","총 공급능력 - 최대수요","—"],
["상향","운영예비력(주파수조정)","AGC/GF 자동 응동","수초~수분"],
["상향","대기예비력(10분)","10분 이내 동기화","10분"],
["상향","대기예비력(30분)","30분 이내 동기화","30분"],
["하향","하향예비력","발전력 감축/수요 증대","—"],
["하향","하향주파수예비력","AGC/원격제어 10분 응동","10분(30분유지)"],
["특수","비상대기예비력(ECR)","기후·환경제약 석탄발전기","급전지시 시"]]},

{t:"전력시장운영규칙 장별 핵심 내용",h:["장","제목","핵심 내용"],r:[
["제1장","총칙","목적, 용어정의(149개), 적용범위"],
["제2장","가격결정","발전비용 평가, 입찰, SMP/CP 결정"],
["제3장","전력의 거래","판매·직접구매·구역전기·직접PPA"],
["제4장","계량과 정산","계량설비, 정산체계, 결제"],
["제5장","전력계통 운영","발전계획, 급전, 보조서비스, 정비"],
["제6장","전력시장 감시","감시위원회, 제재, 시정조치"],
["제7장","분쟁조정","분쟁조정위원회, 조정 절차"],
["제8장","정보공개","정보공개위원회, 정보보호"],
["제9장","규칙개정","규칙개정위원회, 개정 절차"],
["제10장","전력거래시스템","거래소·사업자 설비, 보안"],
["제11장","공급인증서 거래","REC 거래시장 운영"],
["제12장","수요반응자원","DR 등록, 거래, 정산"],
["제13장","정부승인차액계약","차액계약 운영"],
["제14장","발전량 예측제도","재생에너지 예측·정산"],
["제15장","저탄소 중앙계약","저탄소전원 계약시장"],
["제16장","제주 시범사업","급전가능재생에너지 시범"],
["제17장","수소발전입찰","수소발전 계약전력량"],
["제18장","보칙","기타 사항"]]},

{t:"정산 대상별 정산 항목 비교",h:["대상","전력량","용량","부가정산금","기타"],r:[
["발전사업자","MEP(SMP기반)","CP(기준용량가격)","MWP,SUAP 등","보조서비스,시운전 등"],
["직접구매자","SMP×유효구매전력량","직접구매용량가격","부가정산금단가적용","예측제도 정산"],
["판매사업자","SMP×구매전력량","가용능력 정산","부가정산금단가적용","예측제도 정산"],
["구역전기사업자","잉여/부족전력 SMP","가용능력 정산","부가정산금단가적용","예측제도 정산"]]},

{t:"발전비용 구성 요소",h:["구분","항목","약어","단위"],r:[
["변동비","연료의 열량단가","FC","원/Gcal"],
["변동비","열소비상수(무부하)","NLHC","Gcal/h"],
["변동비","1차 열소비계수","LHC","Gcal/MWh"],
["변동비","2차 열소비계수","QHC","Gcal/MW²h"],
["고정비","기동비용","SUC","원"],
["고정비","최대발전용량","MGC","MW"],
["고정비","최소발전용량","MG","MW"],
["특성","출력증가율","RUR","MW/min"],
["특성","출력감소율","RDR","MW/min"],
["특성","최소운전시간","MUT","h"],
["특성","최소정지시간","MDT","h"]]},

{t:"별표(別表) 핵심 목록",h:["별표","제목","핵심 내용"],r:[
["별표 1","기호 및 변수의 정의","전체 기호·변수 약어 정리"],
["별표 2","정산 기준","발전사업자~구역전기 정산 공식"],
["별표 3","전력계통 운영 기준","계통운영 세부 기준"],
["별표 4","입찰 운영 절차","입찰서 제출·처리 절차"],
["별표 5","전력수요 예측 절차","수요예측 방법·절차"],
["별표 7","계량설비 설치기준","계량설비 설치·운영"],
["별표 8","정산 및 결제 절차","정산~결제 세부 절차"],
["별표 9","발전계획·SMP 공개","발전계획 수립 절차"],
["별표 19","보조서비스 절차","보조서비스 운영 절차"],
["별표 23","정산금 조정","전력가격 안정 정산금 조정"],
["별표 25","공급인증서 거래","REC 거래·정산·결제"],
["별표 26","수요반응 정산 기준","DR 정산 세부기준"]]},

{t:"위원회 종류 비교",h:["위원회","근거","주요 기능","구성"],r:[
["비용평가위원회","제2장","발전비용 심사·확정, 기준용량가격 결정","6~9인"],
["계통평가위원회","제5장 제10절","계통운영 기술기준 심의","위원장 포함"],
["전력시장감시위원회","제6장","시장감시, 제재","위원장 포함"],
["분쟁조정위원회","제7장","전력거래 분쟁조정","위원장 포함"],
["정보공개위원회","제8장","정보 공개 심의","위원장 포함"],
["규칙개정위원회","제9장","규칙 개정 심의","위원장 포함"],
["차액계약운영위원회","제13장","정부승인차액계약 운영","위원장 포함"],
["중앙계약시장위원회","제15장","저탄소전원 계약시장 운영","위원장 포함"]]},

{t:"별표2 목차: 정산 기준 전체 구조",h:["장","제목","주요 내용"],r:[
["Ⅰ","발전사업자 정산","전력량(8유형), 용량, 양수동력, ESS충전, SUAP, 보조서비스, 예방정비, 기타, 급전지시량 등 17개 항"],
["Ⅱ","직접구매자 정산","전력량, 용량가격, 부가정산금, 예측제도, 긴급정산상한 보전"],
["Ⅲ","판매사업자 정산","전력량, 가용능력, 부가정산금, 기타, 수소발전 차액"],
["Ⅳ","구역전기사업자 정산","전력량, 가용능력, 부가정산금, 기타, 수소발전 차액"],
["Ⅴ","예측제도 참여자 정산","태양광·풍력 예측오차 인센티브/페널티"],
["Ⅵ","전력거래차수별 대금지급","차수별 정산→청구→결제 일정"],
["Ⅶ","직접전력거래 부가정산금","직접전력거래 부가정산금단가(UPR) 산정"]]},

{t:"발전기 유형별 전력량 정산 공식 상세",h:["유형","정산 공식","MP 산정","특이사항"],r:[
["일반발전기","MEP=MP×Min(MGO,RA+ε)×1000","Min{Max(Min(SMP,PC,EPC),GP),SMP}×TLF","변동비(GP) 비교 포함"],
["수력발전기","가중평균MP×Min(EGW,REGW,MGO)","발전계획시간대 가중평균","계획량 기준 정산"],
["양수발전기","수력과 유사+양수동력 별도","발전입찰량 기준 가중평균","양수계획량 초과/미달 별도"],
["중앙급전ESS","일반발전기 유사","일반발전기 동일","충전전력변동비 별도"],
["비중앙급전","Min(SMP,PC,EPC)×TLF×MGO×1000","변동비 비교 없음","간소화 공식"],
["구역전기발전기","일반 유사(구역수요초과분)","구역수요 초과분만 대상","AL=GCL×(1-MLFL)-EDL"],
["직접전력거래","직접전력거래비율 반영","시장 부분만 정산","2021.12.28 신설"],
["수소발전계약","차액계약정산 방식","계약가격 vs 시장가격","2023.8.30 신설"]]},

{t:"보조서비스 정산 공식 비교",h:["서비스","정산 공식","가중치","정산단가"],r:[
["1차 주파수제어(GF)","PCRSP=Σ PCRQ×SDWF×DBWF×PCRP×1000","속도조정률(1.075~0.8), 불감대(1.05~0.0)","PCRP"],
["2차 주파수제어(AGC)","SCRSP=Σ(SCRQ×CAWF×CPWF+FRQ)×SCRP×1000","제어가용률(1.0~0.0), 제어성과(1.0~0.0)","SCRP"],
["3차예비력","TRASP=Max[(TPC-MP)×TRQ×1000, 0]","없음(차액 보전)","변동비-SMP 차액"],
["속응성자원","QSRASP=Max[(TPC-MP)×QSRQ×1000, 0]","없음(차액 보전)","변동비-SMP 차액"],
["자체기동","BSSP=BSP×BSQ×BSF×1000","BSF(합격1/불합격0)","BSP"],
["예비력용량가치","LOCRSP=LOCRQ×LOCRHF×1000","없음","LOCRHF(예산기반)"]]},

{t:"1차주파수제어 속도조정률 가중치(SDWF)",h:["속도조정률","2%이하","3%이하","4%이하","5%이하","6%이하","7%이하","8%이하","8%초과"],r:[
["SDWF","1.075","1.05","1.025","1.0","0.95","0.9","0.85","0.8"]]},

{t:"용량정산금(CP) 구성요소 비교",h:["대상","기준용량가격","RCF","TCF","PCF","기타"],r:[
["일반발전기","RCPi(개별)","RCFi(지역별)","TCFt(시간대별)","PCFi(성과연동)","β(보정계수)"],
["수력발전기","RCPi(개별)","RCFi(지역별)","TCFt(시간대별)","PCFi(성과연동)","EGW기반"],
["양수발전기","RCPi(개별)","RCFi(지역별)","특수산정","PCFi(성과연동)","발전+양수"],
["ESS","RCPi(개별)","RCFi(지역별)","TCFt(시간대별)","PCFi(성과연동)","실효용량 기반"],
["직접구매자","가중평균RCP","인접발전기RCF","TCFt","1 고정","CFCP(보정계수)"],
["판매사업자","잔여 부담","—","—","—","ΣTPCP-ΣCSC"]]},

{t:"변동비보전정산금(MWP) 구성 비교",h:["구분","적용 조건","공식 핵심","비고"],r:[
["SMWP(계통제약)","MGO-MEGW>ε","Max(SCMWG-MPMWG, 0)","입찰최소발전량 초과 급전"],
["HMWP(열제약)","MEGW≠0","Min{Max(HSCMWG-HMPMWG,0), 무부하비상한}","열전비(HR) 고려"],
["열제약+계통제약","동시 발생 시","SMWP = Max(SCMWG×EAf-MPMWG, 0)","효율보정계수(EAf) 적용"],
["MAP(감축정산)","MGO<Min(DAOS,RA)","Max{MPMAG-SCMAG-LOCMAG, 0}","발전계획 미달분 기대이익"]]},

{t:"기타 정산 항목 (별표2 제12항)",h:["항목","신설/개정","내용"],r:[
["기동대기 발전기","—","계통연결 대기 중 비용 = SUC/SUH × STH"],
["입찰량 초과 급전","—","공급가능용량 초과 급전지시 시 별도 정산"],
["LNG 약정물량","2009.12.31","허용오차 초과 부가금 정산"],
["복합 효율차이","2016.5.12","계통제약운전 중 CC/GT 효율차이 정산"],
["복합 GT재기동","2016.5.12","일부 GT 정지 후 재기동 기동비 정산"],
["열공급 기동비","2016.5.12","열공급 목적 기동 시 기동비 일부 지급"],
["지역자원시설세","2016.5.12","화력발전기 지방세 정산 반영"],
["비상대기예비력","2020.12.1","기후환경 제약 석탄발전기 ECR 정산"],
["긴급정산상한 보전","2022.11.30","비중앙급전 등 연료비 보전"],
["복합 추가정산금","2023.5.3","긴급정산상한가격에 따른 복합 추가정산"]]},

{t:"급전지시량 산정 절차 (별표2 제13항)",h:["구분","조건","처리"],r:[
["계통연결 지연","SDFi,t=1 (허용시간 초과)","ARAi,t = MGOi,t (실제발전량으로)"],
["계통분리 지연","DSDFi,t=1 (허용시간 초과)","AMGOi,t = 0 (발전량 0처리)"],
["조기 계통연결","허용시간 이전 연결","별도 조정"],
["조기 계통분리","허용시간 이전 분리","별도 조정"],
["출력미달 발전","지시출력 미도달","급전지시 발전전력량 별도 산정"],
["초과급전지시","RA 이상 급전","XEOGA = Max(EOSO-RA, 0)"]]},

{t:"직접구매자·판매사업자·구역전기사업자 정산 비교 상세",h:["정산항목","직접구매자","판매사업자","구역전기사업자"],r:[
["전력량","Min(SMP,PC)×PEC","잔여 전력량×SMP","유효구매전력량×Min(SMP,PC)"],
["용량","CPC×RP×PFC","CSS=ΣTPCP-ΣCSC-ΣCSL","가용능력 기반"],
["부가정산금","USt×PEC/(TET-ΣPEC)","잔여 부가정산금","비율 배분"],
["예측제도","대상자원 거래량 정산","대상자원 거래량 정산","대상자원 거래량 정산"],
["긴급정산상한","연료비 보전 적용","연료비 보전 적용","연료비 보전 적용"],
["수소발전","차액계약정산","차액계약정산","차액계약정산"],
["역률조정","PFC=1+Max(0.9-PF,0)","해당없음","해당없음"]]}

];

const PARTS=[
{id:1,i:"📊",t:"경제학",cl:4,h:"수요·공급·시장이론",tm:["수요곡선","공급곡선","시장균형","가격탄력성","소비자잉여","무차별곡선","예산제약","한계효용","기대효용","생산함수","등량곡선","규모수익","기회비용","완전경쟁시장","독점시장","과점시장","가격차별","수요독점","네트워크외부효과"],
co:[{t:"수요·공급 이론과 시장균형",b:"시장은 자본주의 경제의 핵심 운영 원리입니다.\n\n수요의 법칙: 가격↑ → 수요량↓ (우하향 수요곡선)\n공급의 법칙: 가격↑ → 공급량↑ (우상향 공급곡선)\n\n균형: 수요곡선과 공급곡선의 교차점\n• 초과공급 → 가격 하락 압력\n• 초과수요 → 가격 상승 압력\n\n수요곡선 이동 요인: 소득, 연관재 가격, 취향, 기대, 소비자 수\n• 정상재: 소득↑ → 수요↑ / 열등재: 소득↑ → 수요↓\n• 대체재: A가격↓ → B수요↓\n• 보완재: A가격↓ → B수요↑\n\n가격탄력성 = 수요량 변화율 / 가격 변화율\n• 비탄력적(<1): 가격↑ → 총수입↑ (필수품)\n• 탄력적(>1): 가격↑ → 총수입↓ (사치품)\n\n소비자잉여 = 지불용의 - 실제지불\n총잉여 = 소비자잉여 + 생산자잉여\n완전경쟁 균형에서 총잉여 극대화"},{t:"시장조직이론: 완전경쟁에서 독점까지",b:"완전경쟁시장: 다수 공급자·수요자, 동질 상품, 자유 진입·퇴출\n• 기업은 가격수용자(price taker)\n• 이윤극대화: P = MC\n• 장기균형: P = LAC (경제적 이윤 = 0)\n\n독점시장: 단일 공급자, 대체재 없음\n• 자연독점: 한 기업이 시장 전체 수요를 가장 저렴하게 충족\n• MR = MC이나 P > MC → 사중손실(경제적 순손실) 발생\n\n과점시장: 소수 공급자, 전략적 상호 의존\n• 쿠르노 모형: 생산량 동시 결정 → 전력시장 입찰 분석에 활용\n• 죄수의 딜레마: 개인 이익 vs 전체 이익 충돌\n\n독점적 경쟁: 다수 기업, 차별화 상품, 자유 진입·퇴출\n• 광고와 브랜드로 경쟁\n\n수요독점: 생산자 다수, 소비자 1개\n→ 한국 전력시장(한전=단일구매자)이 대표 사례"}]},

{id:2,i:"⚡",t:"전력시장",cl:20,h:"전력거래·신재생시장",tm:["변동비반영시장","의무적풀시장","계통한계가격","용량정산금","하루전발전계획","비용평가위원회","직접PPA","RPS제도","공급인증서","전력상품특성","전력거래소","수요독점","중앙급전발전기","비중앙급전발전기","공급가능용량","정산상한가격","긴급정산상한가격","정산조정계수","기준용량가격","용량가격계수","발전계획","저탄소전원중앙계약시장","제주시범사업","공급인증서거래시장","성과연동형용량가격계수"],
co:[{t:"한국 전력시장의 구조와 특징",b:"한국은 변동비 반영 풀시장(CBP) + 의무적 풀(Gross Pool)\n\n핵심 특징:\n① 변동비로 가격 결정: 입찰서에 '가격' 미포함\n   비용평가위원회가 사전에 각 발전기 변동비 확정\n② 의무 참여: 전기사업법 제31조\n   예외: 도서지역, 1MW 이하 신재생, 직접PPA\n③ 단일구매자: 한전이 사실상 독점 구매(수요독점)\n④ SMP의 단기적 성격: 변동비만 반영\n   → 용량정산금(CP)으로 고정비 별도 보상\n\n전력상품 특성:\n• 비저장성: 수요·공급 순간 일치 필수\n• 비차별성: 연료 무관하게 제품 정체성 소멸\n• 물리적 시스템 의존: 수급 불균형 시 시스템 붕괴\n• 풀링: 모든 발전기 출력 통합 공급"},{t:"전력시장 운영 절차와 가격 결정",b:"운영 절차:\n발전비용평가 → 수요예측 → 입찰 → 하루전발전계획 → SMP 결정 → 신뢰도발전계획 → 실시간 급전 → 계량 → 정산\n\n하루전발전계획:\n• 목적: 총 발전비용 + 수요감축비용 최소화\n• 송전제약, 예비력제약 등 반영\n• 거래일 하루 전 수립\n\nSMP(계통한계가격) 결정:\n수요예측된 전력수요곡선과 변동비 기반 공급곡선이\n계통제약을 만족하며 교차하는 점에서 매시간 결정\n\n발전비용평가:\n비용평가위원회(6~9인)가 발전기별 운전비용 심사·확정\n제출 안 하면 최근 1년 내 가장 불리한 자료 적용"},{t:"신재생에너지 시장과 RPS",b:"RPS(신재생에너지 공급의무화) 제도:\n• 500MW 이상 발전설비 사업자 → 의무공급\n• 의무공급량 = 총발전량(신재생 제외) × 의무비율\n• 이행연기: 20% 이내, 3년 범위\n• 미이행 과징금: REC 평균거래가격의 150% 이내\n\nREC(공급인증서):\n• 신재생에너지 발전 공급 증명 인증서\n• 발급: 한국에너지공단 / 거래: 전력거래소\n\n직접PPA (재생에너지전기공급사업):\n• 재생에너지 → 전력시장 거치지 않고 → 전기사용자\n• 전기사업법 제16조의5\n• 1MW 초과 설비도 직접PPA 가능\n\n전기소비자 REC 구매 시장:\n• 장외거래시장: 연중 개설\n• 플랫폼거래시장: 매월 1·3째주 금요일 10~16시"},{t:"정산체계 심화: 용량정산금(CP)과 발전기 분류",b:"용량정산금(CP) 구조:\nCP = 기준용량가격 × RCFi × TCFt × ĸ × 공급가능용량\n\n기준용량가격: 비용평가위원회 결정\n(용량가격 결정기준 발전기의 순진입비용 회수)\n\nRCFi(용량가격계수): 최대부하·공급용량·TLF 고려\nTCFt(시간대별): 피크/비피크 차등 적용\nĸ(보정계수): 정산금 차액 최소화\n\n성과연동형용량가격계수:\n발전기여도(기준/운전/응동유연성/기동) 반영\n→ 계통기여도 높은 발전기에 더 많은 CP 지급\n\n발전기 분류 (정산 기준):\n• 중앙급전발전기: 20MW 초과, 급전지시 운전\n• 비중앙급전발전기: 20MW 이하 등\n• 중앙급전전기저장장치: ESS, 급전지시 대상\n• 비중앙급전전기저장장치: ESS, 별도 정산\n\n용량정산 제외 발전기:\n시운전발전기, 특정 조건 발전기"},{t:"전력시장 가격 결정과 정산상한",b:"SMP 결정:\n하루전발전계획에서 총발전비용+수요감축비용 최소화\n매 시간 단위로 육지/제주 각각 결정\n\n가격 상한 체계:\n① 정산상한가격(PC): 육지 중앙급전 발전기 적용\n② 긴급정산상한가격: 비상시 산자부 장관 고시\n③ 고정가격계약의 정산상한가격: RPS 고정가격 계약 발전기\n\n정산조정계수:\n한전 50%+ 지분 발전사업자와 석탄발전기에 적용\n정부 전기요금 규제 vs 시장가격 괴리 해소\n\nSMP에 미포함된 비용 보전:\n• 고정비 → 용량정산금(CP)\n• 급전지시 변동비 미회수 → 변동비보전정산금(MWP)\n• 기동비용 → 기동비용조정정산금(SUAP)\n• 보조서비스 → 별도 정산"}]}
,

{id:3,i:"🔌",t:"전력계통",cl:30,h:"발전·송변배전·계통운영",tm:["화력발전","원자력발전","태양광발전","풍력발전","연료전지","ACSR","송전방식","페란티현상","코로나","전력계통특징","전력수요예측","전력수급기본계획","전력계통","급전지시","예비력","보조서비스","전기저장장치","최대발전용량","복합발전기","양수발전기","송전손실계수","조상설비","비상상황","1차주파수제어서비스","2차주파수제어서비스","3차예비력정산금","속응성자원정산금","자체기동서비스정산","예비력용량가치","다조합복합발전기"],
co:[{t:"발전 방식과 신·재생에너지",b:"기존 발전:\n• 화력: 연료 연소 → 증기 → 터빈 → 발전기\n  (석탄, 가스, 복합화력 등)\n• 원자력: 핵분열 → 열 → 증기 → 터빈\n  (기저 발전, 비수도권 해안가)\n\n신에너지:\n• 수소에너지, 연료전지, 석탄가스화(IGCC)\n• 연료전지: 수소+산소 화학반응 → 전기+물+열\n\n재생에너지:\n• 태양광: 광전효과(Photovoltaic effect)\n• 풍력: 바람 운동에너지 → 회전자 → 발전기\n• 수력, 해양, 지열, 바이오 등"},{t:"송전·변전·배전 시스템",b:"한국 전력계통 전압 체계:\n765kV → 345kV → 154kV → 22.9kV → 수용가\n\n교류(AC) 송전:\n• 3상 3선식이 일반적\n• 변압기로 승압·강압 용이\n• 단점: 표피효과, 코로나손, 페란티현상\n\n직류(HVDC) 송전:\n• 송전효율 높고 유도장해 적음\n• 한국: 제주 #1/#2 HVDC, 북당진-고덕 HVDC\n\n주요 기술 용어:\n• ACSR: 강심 알루미늄 연선 (대표적 송전선)\n• 코로나: 임계전압 초과 시 부분 방전 현상\n• 페란티: 경부하 시 수전단 > 송전단 전압\n• 연가: 3상 선로정수 평형을 위한 상 위치 교환\n• 애자: 전선의 기계적 고정 + 전기적 절연"},{t:"전력수급계획과 수요예측",b:"전력수급기본계획:\n• 전기사업법 제25조, 산업통상자원부장관 수립\n• 전력거래소가 총괄 지원\n• 2년 주기, 현재 제10차까지\n\n수요예측 기법:\n• 시계열: 이동평균, 지수평활, ARIMA\n• 인과형: 회귀분석\n• AI: 신경회로망, CNN, RNN/LSTM\n\n예측 기간:\n• 장기(7년+): 전원계획, 계통계획\n• 단기(2년): 유지보수 계획\n• 일간: 하루전발전계획\n• 실시간: 15분/5분 단위, 계통운영\n\n한국 전력계통 특징:\n• 섬 계통 (인접국 미연계)\n• 수요 50%+ 수도권 집중\n• 기저발전 비수도권, LNG 수도권\n• 재생에너지 비중 확대 중"},{t:"전력계통 운영과 보조서비스",b:"전력계통 운영 체계:\n• 발전계획: 하루전 → 신뢰도 → 실시간\n• 급전지시: 전력거래소 → 발전사업자\n• 수급조절: 출력조정, 수요반응, 주파수·전압 제어\n\n보조서비스 5종:\n① 1차 주파수제어(GF): 조속기 자동, 수초 이내\n② 2차 주파수제어(AGC): 자동발전제어, 수십초~수분\n③ 3차 주파수제어: 대기예비력 투입, 10분/30분\n④ 무효전력: 전압 유지 (조상설비 활용)\n⑤ 자체기동(Black Start): 외부 전원 없이 기동\n\n예비력 체계:\n상향: 공급예비력, 운영예비력(주파수조정/대기)\n하향: 하향예비력, 하향주파수예비력\n특수: 비상대기예비력(ECR) - 석탄발전기\n\nESS 운전모드:\n• 정상상태: 계통주파수 추종 충방전\n• 과도상태: 주파수 급락 시 즉시 방전\n• 회복상태: 과도상태 후 방전량 회수"},{t:"복합발전기·양수·ESS의 특성과 운영",b:"복합발전기:\n• CC모드: GT + ST 동시 운전 (고효율)\n• GT모드: 가스터빈만 단독 운전\n• 다조합: 2기+GT + 1기ST (2026.1.1 시행)\n• 입찰: GT단독운전 가능여부/시간/기동우선순위\n\n양수발전기:\n• 양수(충전) → 상부 저수지 → 방류(발전)\n• 양수동력 별도 정산 (계획량 기준 초과/미달)\n• 급전지시량: 수력·양수 별도 산정절차\n\n전기저장장치(ESS):\n• 중앙급전: 급전지시 대상, 용량정산금 지급\n• 비중앙급전: 별도 정산\n• 실효용량 = 입찰용량 × 실효용량비율\n• 충전전력 변동비 별도 산정\n\n발전기 기동 상태:\n• 열간(Hot): 짧은 정지 → 빠른 재기동\n• 온간(Warm): 중간 정지\n• 냉간(Cold): 긴 정지 → 느린 재기동\n각 상태별 기동비용·기동소요시간 상이"}]}
,

{id:4,i:"📜",t:"전기관련 법규",cl:11,h:"전기사업법·신재생법·운영규칙",tm:["전기사업법","전력시장운영규칙","구역전기사업","신재생에너지법","전력시장감시","분쟁조정","정보공개","규칙개정","하한제약"],
co:[{t:"전기사업법의 핵심 구조",b:"전기사업자 5종 + 전기신사업:\n\n[기존 5종]\n1. 발전사업자: 전기 생산 → 전력시장 공급\n2. 송전사업자: 송전설비 설치·관리\n3. 배전사업자: 배전설비 운용\n4. 전기판매사업자: 전기사용자에 전기 공급\n5. 구역전기사업자: 35MW 이하, 특정 구역 직접 공급\n\n[전기신사업]\n• 전기차충전사업\n• 소규모전력중개사업\n• 재생에너지전기공급사업\n• 통합발전소사업(VPP)\n• 재생에너지전기저장판매사업\n• 송전제약발생지역전기공급사업\n\n허가: 산업통상자원부장관 (3MW 이하: 시도지사)\n전기위원회 심의 필수\n\n전력거래(제31조): 의무적 풀시장 참여\n직접구매(제32조): 30MVA 이상 전기사용자"},{t:"전력시장운영규칙과 신재생에너지법",b:"전력시장운영규칙:\n• 전기사업법 제43조에 근거\n• 발전비용 평가, 입찰, 가격결정, 정산 등 세부 규정\n• 입찰서: 공급가능용량 + 기술적 특성 (가격 미포함)\n\n신에너지 및 재생에너지 개발·이용·보급 촉진법:\n• 신에너지 정의: 화석연료 변환, 수소·산소 화학반응\n• 재생에너지 정의: 햇빛·물·지열 등 재생가능 에너지\n\nRPS 의무대상: 500MW 이상 발전설비 보유 사업자\n\n발전사업 허가 시 주민 의견수렴 의무화:\n• 태양광, 풍력, 연료전지 발전사업\n• 환경영향평가 대상: 14일 전 공고\n• 비대상: 7일 전 공고"},{t:"전력시장운영규칙 주요 위원회와 감시제도",b:"■ 주요 위원회 (8개):\n① 비용평가위원회(6~9인): 발전비용 심사·확정, 기준용량가격\n② 계통평가위원회: 계통운영 기술기준 심의\n③ 전력시장감시위원회: 시장 공정성 감시, 제재\n④ 분쟁조정위원회: 전력거래 분쟁 조정\n⑤ 정보공개위원회: 정보 공개 심의\n⑥ 규칙개정위원회: 규칙 개정 심의\n⑦ 차액계약운영위원회: 정부승인차액계약\n⑧ 중앙계약시장위원회: 저탄소전원 계약시장\n\n■ 시장감시 체계:\n모니터링 → 이상거래 감지 → 조사 → 제재\n자율시정조치 / 직권시정조치\n\n■ 분쟁조정:\n신청서 제출 → 위원회 심의 → 조정안 → 수락/불복\n\n■ 규칙개정:\n개정제안서 → 위원회 심의 → 결과 통지\n최초 2001.3.30 제정 이래 수십 차례 개정"}]}
,

{id:5,i:"💼",t:"전력거래 실무",cl:55,h:"거래절차·정산·계량·규칙",tm:["전력거래절차","자가용전기설비","전력거래소","의무적풀시장","직접PPA","계통한계가격","전력량정산금","변동비보전정산금","기동비용조정정산금","부가정산금","정산","거래기간","계량","결제","입찰서","직접구매자","판매사업자","구역전기사업자정산","수요반응","열량단가","시운전발전기","예방정비","재생에너지직접전력거래","수소발전입찰시장","제3자간전력거래","대체연료정산","지역자원시설세","전력거래시스템","정부승인차액계약","재생에너지발전량예측제도","허용오차","열전비","효율보정계수","감축전력량정산금","초과발전정산","직접구매용량가격","역률조정계수","유효구매전력량","부가정산금단가","구역수요초과공급가능용량","양수동력변동비","충전전력변동비","기동대기발전기정산","계통연결지연","전력거래차수","예측오차정산","차액계약정산","LNG약정물량정산","열공급기동비","복합발전기효율차이정산","비상대기예비력정산","긴급정산상한가격연료비보전","직접전력거래부가정산금","판매사업자가용능력정산","수력발전기정산","비중앙급전발전기정산","중앙급전구역전기발전기정산","직접전력거래발전기정산","수소발전계약발전기정산","시운전전력정산","입찰량초과급전정산"],
co:[{t:"전력거래 실무의 핵심",b:"전력거래 시작 절차:\n1. 이파워마켓 회원가입 신청\n2. 전력거래자 등록\n3. 발전기 등록\n4. 사용전 검사\n5. 계량설비 봉인\n6. 전력거래 개시 승인\n7. (중앙급전) 상업운전개시 → 정상 입찰\n\n전력시장 참여 예외:\n• 도서지역 (전력계통 미연결)\n• 1MW 이하 신재생 → 전력시장 또는 한전과 수급계약\n• 1MW 초과 신재생 → 전력시장 또는 직접PPA\n\n자가용전기설비:\n• 원칙: 전력시장 거래 불가\n• 태양광: 자가사용 후 잔여 전력 거래 가능\n• 태양광 외: 연간 총생산량 50% 미만 거래 가능\n\n구역전기사업자:\n• 특정 구역 수요 대비 부족/잉여 전력 → 시장 거래 가능"},{t:"정산 체계와 전력량정산금(MEP)",b:"전력시장 정산 = 전력거래소가 사업자별 보상금·부담금 산정\n\n■ 발전사업자 정산 구조:\n① 전력량정산금(MEP): SMP × 계량전력량 × TLF\n② 용량정산금(CP): 기준용량가격 × RCF × TCF × ĸ × 공급가능용량\n③ 변동비보전정산금(MWP): 급전지시로 변동비 미회수 시 차액\n④ 기동비용조정(SUAP): 기동연료비+소내전력비+용수비 정산\n⑤ 보조서비스 정산: GF, AGC, 자체기동 등\n\nMEP 공식:\nMEPi,t = MPi,t × Min(MGOi,t, RAi,t+ε) × 1000\nMP = Min{Max(Min(SMP,PC,EPC),GP),SMP} × TLF\n\n제주지역: PC(정산상한가격) 미적용\nMP = Min{Max(Min(SMP,EPC),GP),SMP} × TLF\n\n발전기 유형별 정산방식 상이:\n일반/수력/양수/ESS/비중앙급전/구역전기/직접전력거래/수소발전"},{t:"별표2 정산기준: 부가정산금과 특수정산",b:"■ 부가정산금(Uplift):\nMEP·CP 외 모든 발전기 정산금 총칭\n(배출권비용, RPS이행비용, DR정산 제외)\n\n■ 변동비보전정산금(MWP):\nHMWP(열제약) + SMWP(계통제약)\n입찰최소발전량 초과 급전 시 변동비 미회수분 보전\nCC→GT모드 전환 시 GT모드 변동비 적용\n\n■ 양수·ESS 특수정산:\n양수: 양수동력 정산 (양수계획량 기준 초과/미달)\nESS: 충전전력변동비 별도 산정\n\n■ 기타 정산:\n• 시운전 전력 정산\n• 대체연료 사용 발전기 정산\n• 예방정비 일정 변경 정산\n• 기동대기 발전기 정산\n• 지역자원시설세 정산\n• 긴급정산상한가격 관련 연료비 보전\n• 비상대기예비력(ECR) 정산"},{t:"전력시장운영규칙 전체 구조 (18장+별표34개)",b:"[본칙 18장]\n제1장 총칙: 목적, 149개 용어정의, 적용범위\n제2장 가격결정: 발전비용평가, 비용평가위원회, 입찰, SMP·CP 결정\n제3장 전력의 거래: 판매사업자·직접구매·구역전기·직접PPA\n제4장 계량과 정산: 계량설비, 정산·결제 체계\n제5장 전력계통 운영: 발전계획, 급전, 보조서비스, 정비계획\n제6~9장: 시장감시, 분쟁조정, 정보공개, 규칙개정\n제10장: 전력거래시스템\n제11~17장: 공급인증서, 수요반응, 차액계약, 예측제도, 저탄소계약, 제주시범, 수소발전\n제18장: 보칙\n\n[주요 별표]\n별표1: 기호·변수 / 별표2: 정산기준 / 별표3: 계통운영\n별표4: 입찰절차 / 별표7: 계량설비 / 별표8: 정산·결제\n별표19: 보조서비스 / 별표26: 수요반응정산\n\n[주요 위원회 8개]\n비용평가·계통평가·시장감시·분쟁조정\n정보공개·규칙개정·차액계약·중앙계약시장"},{t:"발전기 유형별 전력량정산 상세",b:"■ 일반발전기:\nMEP = MP × Min(MGO, RA+ε) × 1000\nMP = Min{Max(Min(SMP,PC,EPC),GP),SMP} × TLF\n→ 변동비(GP)와 SMP 사이에서 결정\n\n■ 수력발전기:\n계획량 이내: 가중평균MP × Min(EGW,REGW,MGO)\n초과발전: 최고MP + 기준용량가격 + RCF\n미달발전: 정산 없음\n\n■ 양수발전기:\n방전: 수력과 유사 (가중평균MP)\n양수동력: 계획량 기준 초과/미달 별도 정산\n\n■ 전기저장장치(ESS):\n방전: 일반발전기와 유사\n충전: 충전전력변동비 별도 산정\n\n■ 비중앙급전발전기:\nMEP = Min(SMP, PC, EPC) × TLF × MGO × 1000\n→ 변동비 비교 없이 단순 공식\n\n■ 중앙급전 구역전기발전기:\n구역수요 초과분만 시장 정산\nAL = GCL × (1-MLFL) - EDL\n\n■ 직접전력거래 발전기:\n직접전력거래비율 반영\n시장 부분만 정산 대상\n\n■ 수소발전계약 발전기:\n차액계약정산 방식 [2023.8.30 신설]"},{t:"변동비보전정산금(MWP) 상세 구조",b:"MWPi = Σt (HMWPi,t + SMWPi,t)\n\n■ SMWP (계통제약 변동비보전):\nMGO - MEGW > ε 이면:\nSMWP = Max(SCMWG - MPMWG, 0)\n\nSCMWG: 입찰최소발전량 초과 발전의 변동비\n= QPC × {Min(MGO,RA+ε)² - Min(RA,MEGW)²}\n+ LPC × {Min(MGO,RA+ε) - Min(RA,MEGW)}\n+ NLPC × MWGF\n\nMPMWG: 초과 발전의 시장가격 정산금\n= MP × (Min(MGO,RA+ε) - Min(RA,MEGW)) × 1000\n\n■ HMWP (열제약 변동비보전):\nMEGW=0이면 HMWP=0\n그 외: Min{Max(HSCMWG-HMPMWG, 0), 무부하비상한}\n열전비(HR) 고려하여 무부하비 한도 적용\n\n■ 다조합복합발전기:\n운전조합별 비용계수(QPC,LPC,NLPC) 적용\n\n■ 급전지시표시기(MWGF):\nMGO>0 이고 MEGW=0이면 1, 기타 0\n계통연결/분리 지연 시 0으로 조정"},{t:"용량정산금(CP) 상세와 예방정비 정산",b:"■ 일반발전기 용량정산:\nTPCPi,t = Max{FCAi,t, DAOSi,t} × (HCFi,t + β) × 1000\nHCFi,t = RCPi × RCFi × TCFt × PCFi\n\nFCAi,t = Max(OFCAi,t, MGOi,t)\n  OFCAi,t: 연료량(전기에너지 환산량)\n\n■ 수력발전기 용량정산:\nTPCPi,t = Min(EGWi,t, REGWi,t) × (HCFi,t + β) × 1000\n→ 입찰 발전계획량 기반\n\n■ 용량정산 제외 발전기:\n시운전발전기, 특정 조건 발전기\n\n■ 제주지역:\n제주 발전기 전용 기준용량가격 적용\n\n■ 예방정비 일정 변경 정산:\n가) 일반발전기:\nACP = PMA × PRAF × (DCF+β) × ACTF × 1000\n거래소가 정비일정 조정 시만 적용 (ACTF=1)\n\n나) 복합·수력발전기:\n조정 후 예방정비기간 동안 추가용량정산금\n\n다) 양수발전기:\n양수특성 고려 별도 산정"},{t:"기동비용조정(SUAP)과 급전지시량 산정",b:"■ 기동비용조정정산금:\nSUAPi = Max{SUCi × (NSUAi - NSUSi), 0}\n\nSUCi: 기동비용 (기동연료비+소내전력비+용수비)\nNSUAi: 실제 기동 횟수\nNSUSi: 계획된 기동 횟수\n→ 실제>계획이면 추가 기동비 정산\n\n■ 다조합복합발전기 기동비:\nSUAPi = Max{GSUCi×(GNSUAi-GNSUSi), 0}\n       + Max{SSUCi×(SNSUAi-SNSUSi), 0}\nGT와 ST의 기동비를 각각 산정\n\n■ 급전지시량 산정절차:\n가) 수력·양수 급전지시량 산정\n나) 양수지시량 산정\n다) 재선언 공급가능용량 이상 초과급전 산정\n라) 계통연결 지연 (SDFi,t): 허용시간 초과 → ARA=MGO\n마) 계통분리 지연 (DSDFi,t): 허용시간 초과 → AMGO=0\n바) 조기 계통연결\n사) 조기 계통분리\n아) 지시출력 미달 발전 시 급전지시 발전전력량 산정\n\n■ 공급가능용량 조정 원칙:\n발전사업자 사유로 공급가능용량 축소 시 규정 적용"},{t:"직접구매자·판매사업자·구역전기사업자 정산",b:"■ 직접구매자 정산:\n① 전력량: ESCk,t = Min(SMP, PC) × PECk,t × 1000\n  PEC = Max(MEC-ASRS, 0) × TLF × (1+DLFC) × (1+LLFC)\n② 용량: CSCk,t = CPCt × RPk × PFCk,t × 1000\n  역률조정: PFC = 1 + Max(0.9-PF, 0)\n③ 부가정산금: USCk,t = USt × PECk,t / (TETt-ΣPECk,t)\n\n■ 판매사업자 정산:\n① 전력량: 잔여 전력량 × SMP\n② 가용능력: CSSt = ΣTPCPi,t - ΣCSCk,t - ΣCSLd,t\n  (전체 용량정산 - 직접구매자분 - 구역전기사업자분)\n③ 부가정산금: 잔여 부가정산금 부담\n\n■ 구역전기사업자 정산:\n① 전력량: 유효구매전력량 × Min(SMP, PC)\n② 가용능력: 용량가격 기반\n③ 부가정산금: 비율 배분\n\n■ 공통 추가 정산:\n• 예측제도 참여자 대상자원 전력거래량 정산\n• 긴급정산상한가격 연료비 보전\n• 수소발전입찰시장 차액계약정산"},{t:"보조서비스 정산 상세와 불이행 기준",b:"■ 1차주파수제어(GF):\nPCRSP = Σ PCRQi,t × SDWFi × DBWFi × PCRP × 1000\n속도조정률 가중치: 2%이하 1.075 ~ 8%초과 0.8\n불감대 가중치: ±0.04%이하 1.05, 0.06%초과 0.0\n불감대 증빙 미제출 시 최하위 적용\n\n■ 2차주파수제어(AGC):\nSCRSP = Σ (SCRQi,t × CAWFi,t × CPWFi + FRQi,t) × SCRP × 1000\n제어가용률 90%초과: CAWF=1.0, 50%미만: CAWF=0.0\n제어성과 90%초과: CPWF=1.0, 50%미만: CPWF=0.0\n\n■ 3차예비력:\nTRASP = Max[(TPC-MP) × TRQ × 1000, 0]\n변동비>시장가격 시에만 차액 보전\n\n■ 자체기동:\nBSSP = BSP × BSQ × BSF × 1000\n시험검사 합격 발전기만 정산(BSF=1)\n\n■ 예비력용량가치:\nLOCRSP = LOCRQ × LOCRHF × 1000\n예비력 예산 총액 기반 단가 산정\n\n■ 보조서비스 불이행:\n지정 발전기 운전 불가 시 대체 지정\n불이행 횟수 누적 시 제재 가능"},{t:"예측제도·직접전력거래·수소발전 정산",b:"■ 예측제도 참여자 정산 (별표2 제Ⅴ):\n대상: 재생에너지 발전사업자\n예측발전량 제출 → 오차율 산정 → 인센티브/페널티\n\n주요자원 예측발전량:\nFGM = FGS × SVF + FGW × WVF\n(태양광·풍력 각각 예측, 가중치 적용)\n\n유효설비용량:\nICM = ICS × SVF + ICW × WVF\n\n직접구매자·판매사업자·구역전기사업자도\n예측제도 참여자 대상자원 전력거래량 정산\n\n■ 직접전력거래 부가정산금 (별표2 제Ⅶ):\nUPR = (TUC - LPT - ECRP) / (TET - SRC - TESC)\n\n■ 수소발전입찰시장 차액계약 (별표2 제17):\n계약가격 vs 시장가격 차액 정산\n연간계약전력량(ACG) 이행 관리\n판매사업자·구역전기사업자에도 적용\n\n■ 전력거래차수별 대금지급 (별표2 제Ⅵ):\n차수별 일정에 따라 정산 → 청구 → 결제\n전력거래전담 금융기관을 통한 대금 이체"}]}
];

// ── STATE ──
const S={v:"home",part:null,tab:"terms",exp:{},done:{},sq:"",gf:"all",df:0,fc:0,fcFlip:false,fcMode:false,
quiz:null,qLoad:false,qErr:null,qa:{},qSub:false,qCnt:5,qDiff:1,qScore:null,apiShow:false};

let _apiKey="";
try{_apiKey=localStorage.getItem("kpx_api_key")||"";}catch(e){_apiKey="";}

function go(upd){Object.assign(S,upd);render();}
function esc(s){const d=document.createElement("div");d.textContent=s;return d.innerHTML;}
function nl2br(s){return esc(s).replace(/\n/g,"<br>")}

// ── QUIZ GENERATOR ──
async function genQuiz(){
  if(!_apiKey){alert("🔑 상단에서 Gemini API 키를 먼저 입력해주세요!");return;}
  const p=PARTS.find(x=>x.id===S.part);if(!p)return;
  go({qLoad:true,qErr:null,quiz:null,qa:{},qSub:false,qScore:null});
  const dn=S.qDiff===1?"기초(기본 개념, 용어 정의)":S.qDiff===2?"중급(원리 이해, 비교 분석)":"심화(수식, 법규 조항, 응용)";
  const td=p.tm.filter(t=>G[t]).map(t=>`[${t}] ${G[t].s}: ${G[t].f}`).join("\n\n");
  const cd=(p.co||[]).map(c=>`[이론: ${c.t}]\n${c.b}`).join("\n\n");
  const prompt=`당신은 전력거래사 자격시험 교육 전문가입니다.

아래 [학습 자료]를 바탕으로 4지선다 퀴즈를 정확히 ${S.qCnt}개 만들어주세요.
난이도: ${dn}

[절대 규칙]
1. 오직 아래 [학습 자료]에 명시적으로 포함된 내용만으로 문제 출제
2. 학습 자료에 없는 내용, 추측, 외부 지식 절대 사용 금지
3. 정답과 오답 모두 학습 자료에서 확인 가능해야 함
4. 각 문제 정답은 반드시 1개
5. 오답은 학습 자료 내 다른 개념에서 그럴듯하게 구성
6. explanation은 학습 자료 근거 포함 1~2문장

반드시 아래 JSON 형식으로만 응답:
[{"q":"질문","o":["선지A","선지B","선지C","선지D"],"a":정답인덱스0부터3,"e":"해설"}]

[학습 자료 - 용어]
${td}

[학습 자료 - 이론]
${cd}`;
  try{
    const r=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${_apiKey}`,{
      method:"POST",headers:{"Content-Type":"application/json"},
      body:JSON.stringify({contents:[{parts:[{text:prompt}]}],generationConfig:{temperature:0.3,maxOutputTokens:4096}})
    });
    const d=await r.json();
    if(d.error)throw new Error(d.error.message||"API 오류");
    const txt=(d.candidates&&d.candidates[0]&&d.candidates[0].content&&d.candidates[0].content.parts||[]).map(p=>p.text||"").join("");
    const clean=txt.replace(/```json|```/g,"").trim();
    const quiz=JSON.parse(clean);
    if(!Array.isArray(quiz)||quiz.length===0)throw new Error("빈 응답");
    go({quiz,qLoad:false});
  }catch(e){go({qLoad:false,qErr:"퀴즈 생성 실패: "+(e.message||"다시 시도해주세요.")});}
}

function getFiltered(){
  return Object.entries(G).filter(([k,v])=>{
    if(S.sq&&!k.toLowerCase().includes(S.sq.toLowerCase())&&!v.s.toLowerCase().includes(S.sq.toLowerCase())&&!v.f.toLowerCase().includes(S.sq.toLowerCase()))return false;
    if(S.gf!=="all"&&v.c!==S.gf)return false;
    if(S.df>0&&v.d!==S.df)return false;
    return true;
  });
}

function showTip(termName){
  const v=G[termName];if(!v)return;
  const ct=CATS[v.c];
  const tip=document.getElementById("termTip");
  const box=document.getElementById("ttBox");
  const ov=document.getElementById("ttOverlay");
  box.innerHTML=`
    <div class="tt-head">
      <span class="tt-name">${esc(termName)}</span>
      <span style="font-size:10px;color:${ct.c}">${ct.i}${ct.l}</span>
      <button class="tt-close" onclick="closeTip()">✕</button>
    </div>
    <div class="tt-sub">${esc(v.s)}</div>
    <div class="tt-detail">${nl2br(v.f)}</div>
    <span class="tt-goto" onclick="closeTip();go({v:'glossary',sq:'${esc(termName)}',gf:'all',df:0})">📖 용어 사전에서 보기 →</span>
  `;
  ov.style.display="block";tip.classList.add("show");
}
function closeTip(){document.getElementById("termTip").classList.remove("show");document.getElementById("ttOverlay").style.display="none";}

function linkTerms(text){
  let html=nl2br(text);
  const termKeys=Object.keys(G).sort((a,b)=>b.length-a.length);
  const holders=[];
  termKeys.forEach(tk=>{
    const escaped=esc(tk).replace(/[.*+?^${}()|[\]\\]/g,'\\$&');
    const regex=new RegExp('(?<![\\w가-힣])'+escaped+'(?![\\w가-힣])','g');
    html=html.replace(regex,()=>{
      const idx=holders.length;
      holders.push(`<span class="tt-word" onclick="event.stopPropagation();showTip('${tk.replace(/'/g,"\\'")}')">${esc(tk)}</span>`);
      return `\x00PH${idx}\x00`;
    });
  });
  holders.forEach((h,i)=>{html=html.replace(`\x00PH${i}\x00`,h);});
  return html;
}

function termCard(k,v,open){
  const ct=CATS[v.c];
  return `<div class="card" onclick="go({exp:Object.assign({},S.exp,{'${esc(k)}':${open?'false':'true'}})})">
  <div class="tc-head">
    <span class="tc-badge" style="color:${ct.c};background:${ct.c}18">${ct.i}${ct.l}</span>
    <span class="tc-badge" style="color:${DC(v.d)};background:${DC(v.d)}18">${DL(v.d)}</span>
    <span class="tc-name">${esc(k)}</span>
    <span class="tc-arrow ${open?'open':''}">▼</span>
  </div>
  <div class="tc-short">${esc(v.s)}</div>
  ${open?`<div class="tc-detail">${linkTerms(v.f)}</div>
  ${v.r&&v.r.length?`<div class="tc-refs"><span style="font-size:10px;color:var(--tm)">연관:</span>${v.r.map(r=>`<span class="tc-ref" onclick="event.stopPropagation();showTip('${esc(r)}')">${esc(r)}</span>`).join("")}</div>`:""}`:""}
  </div>`;
}

// ── MAIN RENDER ──
function render(){
  const $=document.getElementById("app");
  const allT=Object.entries(G);
  const doneN=Object.keys(S.done).length;
  const prog=Math.round(doneN/5*100);

  let apiBar=`<div class="api-bar ${S.apiShow?'show':''}" id="abar">
    <div class="api-row">
      <span style="color:var(--tm);font-size:11px;flex-shrink:0">🔑</span>
      <input class="api-input" type="password" id="akIn" placeholder="AIzaSy..." value="${esc(_apiKey)}">
      <button class="api-save" onclick="saveApiKey()">저장</button>
      <span class="api-ok" id="apiOk">✓</span>
    </div>
    <div style="font-size:10px;color:var(--tm);font-weight:500">AI 퀴즈 기능에 필요 (Gemini Flash) · 키는 브라우저에만 저장</div>
  </div>`;

  // ── FLASHCARD ──
  if(S.fcMode){
    const terms=getFiltered();const ts=terms.length>0?terms:allT;
    const idx=S.fc%ts.length;const[ck,cv]=ts[idx];const ct=CATS[cv.c];
    $.innerHTML=apiBar+`
    <div class="topbar"><button class="btn-back" onclick="go({fcMode:false})">← 돌아가기</button>
    <span style="font-size:14px;font-weight:700;flex:1">🃏 플래시카드</span>
    <span style="font-size:11px;color:var(--tm)">${idx+1}/${ts.length}</span></div>
    <div style="flex:1;display:flex;align-items:center;justify-content:center;padding:16px;min-height:60vh">
      <div class="fc-card ${S.fcFlip?'flipped':''}" onclick="go({fcFlip:!S.fcFlip})">
        ${!S.fcFlip?`
          <div style="font-size:10px;color:${ct.c};margin-bottom:6px">${ct.i} ${ct.l}·${DL(cv.d)}</div>
          <div style="font-size:20px;font-weight:700;margin-bottom:10px">${esc(ck)}</div>
          <div style="font-size:12px;color:var(--td)">${esc(cv.s)}</div>
          <div style="font-size:11px;color:var(--tm);margin-top:16px">탭하여 뒤집기 ☝️</div>
        `:`
          <div style="font-size:14px;font-weight:600;color:var(--acd);margin-bottom:12px;font-family:'Noto Serif KR',serif">${esc(ck)}</div>
          <div style="font-size:12px;line-height:1.8;color:var(--td);white-space:pre-line;text-align:left;max-height:50vh;overflow-y:auto">${linkTerms(cv.f)}</div>
        `}
      </div>
    </div>
    <div style="padding:12px 16px 24px;display:flex;justify-content:center;gap:10px">
      <button class="btn-tag" onclick="go({fc:Math.max(0,S.fc-1),fcFlip:false})">← 이전</button>
      <button class="btn-tag on" onclick="go({fc:S.fc+1,fcFlip:false})">다음 →</button>
    </div>`;
    return;
  }

  // ── GLOSSARY / COMPARE ──
  if(S.v==="glossary"||S.v==="compare"){
    let inner="";
    if(S.v==="glossary"){
      const ft=getFiltered();
      inner=`<input class="search" id="sqIn" placeholder="용어 검색..." value="${esc(S.sq)}" oninput="go({sq:this.value})">
      <div class="filter-row">
        <button class="btn-tag ${S.gf==='all'?'on':''}" onclick="go({gf:'all'})">전체</button>
        ${Object.entries(CATS).map(([k,v])=>`<button class="btn-tag ${S.gf===k?'on':''}" style="${S.gf===k?`border-color:${v.c}55;background:${v.c}18;color:${v.c}`:''}" onclick="go({gf:'${k}'})">${v.i}${v.l}</button>`).join("")}
      </div>
      <div class="filter-row" style="margin-bottom:12px">
        ${[{v:0,l:"전체"},{v:1,l:"⭐기초"},{v:2,l:"⭐⭐중급"},{v:3,l:"⭐⭐⭐심화"}].map(d=>`<button class="btn-tag ${S.df===d.v?'on':''}" onclick="go({df:${d.v}})">${d.l}</button>`).join("")}
        <span style="margin-left:auto;font-size:10px;color:var(--tm)">${ft.length}개</span>
      </div>
      ${ft.length?ft.map(([k,v])=>termCard(k,v,!!S.exp[k])).join(""):'<div class="empty">검색 결과 없음</div>'}`;
    }else{
      inner=COMPS.map(tb=>`<div style="margin-bottom:20px">
        <h3 style="font-size:14px;font-weight:700;margin-bottom:8px">${esc(tb.t)}</h3>
        <div style="overflow-x:auto;-webkit-overflow-scrolling:touch"><table class="tbl"><thead><tr>${tb.h.map(h=>`<th>${esc(h)}</th>`).join("")}</tr></thead><tbody>${tb.r.map(r=>`<tr>${r.map((c,i)=>`<td${i===0?' style="color:var(--t);font-weight:600"':''}>${esc(c)}</td>`).join("")}</tr>`).join("")}</tbody></table></div></div>`).join("");
    }
    $.innerHTML=apiBar+`
    <div class="topbar"><button class="btn-back" onclick="go({v:'home'})">← 홈</button>
    <span style="font-size:14px;font-weight:700;flex:1">${S.v==="glossary"?"📖 전체 용어 사전":"📊 비교표"}</span>
    ${S.v==="glossary"?'<button class="btn-tag on" onclick="go({fcMode:true,fc:0,fcFlip:false})">🃏</button>':''}
    </div><div class="content">${inner}</div>`;
    return;
  }

  // ── PART VIEW ──
  if(S.v==="part"&&S.part){
    const p=PARTS.find(x=>x.id===S.part);
    let tabContent="";

    if(S.tab==="terms"){
      tabContent=p.tm.map(t=>G[t]?termCard(t,G[t],!!S.exp[t]):"").join("");
    }else if(S.tab==="theory"){
      tabContent=(p.co||[]).map((c,i)=>`<div class="concept">
        <div class="concept-idx">CONCEPT ${i+1} / ${p.co.length}</div>
        <div class="concept-title">${esc(c.t)}</div>
        <div class="concept-body">${linkTerms(c.b)}</div>
      </div>`).join("")||'<div class="empty">이론 설명이 준비 중입니다</div>';
    }else{
      if(S.qLoad){
        tabContent=`<div style="text-align:center;padding:40px 0"><div style="font-size:28px;margin-bottom:10px">⏳</div><div style="color:var(--td);font-size:13px">AI가 퀴즈를 생성 중...</div></div>`;
      }else if(!S.quiz){
        tabContent=`<div class="card" style="padding:20px;text-align:center">
          <div style="font-size:24px;margin-bottom:8px">🤖</div>
          <div style="font-size:14px;font-weight:700;margin-bottom:4px">AI 동적 퀴즈 (Gemini Flash)</div>
          <div style="font-size:11px;color:var(--td);margin-bottom:16px">학습 자료 기반 · 할루시네이션 없는 문제 생성</div>
          <div style="margin-bottom:12px">
            <div style="font-size:11px;color:var(--tm);margin-bottom:4px">문제 수</div>
            <div style="display:flex;gap:4px;justify-content:center">${[5,10,15,20].map(n=>`<button class="btn-tag ${S.qCnt===n?'on':''}" onclick="go({qCnt:${n}})">${n}문제</button>`).join("")}</div>
          </div>
          <div style="margin-bottom:16px">
            <div style="font-size:11px;color:var(--tm);margin-bottom:4px">난이도</div>
            <div style="display:flex;gap:4px;justify-content:center">${[1,2,3].map(d=>`<button class="btn-tag ${S.qDiff===d?'on':''}" onclick="go({qDiff:${d}})">${"⭐".repeat(d)} ${DL(d)}</button>`).join("")}</div>
          </div>
          <button class="btn-pill" style="background:linear-gradient(135deg,var(--acd),var(--ac));padding:12px 32px" onclick="genQuiz()">퀴즈 생성하기</button>
          ${S.qErr?`<div style="color:var(--r);font-size:12px;margin-top:10px">${esc(S.qErr)}</div>`:""}
        </div>`;
      }else{
        const quiz=S.quiz;let sc=S.qSub?quiz.filter((q,i)=>S.qa[i]===q.a).length:0;
        tabContent=(S.qSub?`<div class="card" style="padding:16px;display:flex;align-items:center;gap:12px;border-color:${sc===quiz.length?'var(--g)':'var(--r)'};background:${sc===quiz.length?'var(--gbg)':'var(--rbg)'}">
          <span style="font-size:28px">${sc===quiz.length?"🎉":"📊"}</span>
          <div><div style="font-size:16px;font-weight:700;color:${sc===quiz.length?'var(--g)':'var(--r)'}">${sc}/${quiz.length}점</div>
          <div style="font-size:11px;color:var(--td)">${sc===quiz.length?"완벽합니다!":"틀린 문제를 확인해보세요"}</div></div>
        </div>`:"")+
        quiz.map((q,qi)=>{
          const ans=S.qa[qi];const sub=S.qSub;
          return `<div class="card" style="padding:14px;margin-bottom:10px">
            <div style="font-size:11px;color:var(--ac);margin-bottom:4px">Q${qi+1}</div>
            <div style="font-size:13px;font-weight:600;margin-bottom:10px;line-height:1.5">${esc(q.q)}</div>
            ${q.o.map((o,oi)=>{
              let cls="quiz-opt";
              if(sub){if(oi===q.a)cls+=" correct";else if(oi===ans&&ans!==q.a)cls+=" wrong";}
              else if(ans===oi)cls+=" sel";
              return `<button class="${cls}" ${sub?'disabled':''} onclick="S.qa[${qi}]=${oi};render()">${esc(o)}</button>`;
            }).join("")}
            ${sub?`<div style="margin-top:10px;padding:10px 12px;background:var(--acg);border:1px solid var(--b);border-radius:10px;font-size:11.5px;color:var(--td);line-height:1.7">💡 ${esc(q.e)}</div>`:""}
          </div>`;
        }).join("")+
        (S.qSub?`<div style="display:flex;gap:8px;margin-top:10px">
          <button class="btn-pill" style="background:linear-gradient(135deg,var(--acd),var(--ac));padding:10px 20px" onclick="go({quiz:null,qa:{},qSub:false,qScore:null})">새 퀴즈</button>
        </div>`:`<div style="display:flex;gap:8px;margin-top:10px">
          <button class="btn-pill" style="background:${Object.keys(S.qa).length<quiz.length?'var(--b)':'linear-gradient(135deg,var(--acd),var(--ac))'};padding:10px 20px;${Object.keys(S.qa).length<quiz.length?'opacity:.5':''}" ${Object.keys(S.qa).length<quiz.length?'disabled':''} onclick="submitQuiz()">제출 (${Object.keys(S.qa).length}/${quiz.length})</button>
          <button class="btn-tag" onclick="go({quiz:null,qa:{},qSub:false})">취소</button>
        </div>`);
      }
    }

    const tabs=[["terms",`📖 용어 (${p.tm.length})`],["theory",`📘 이론 (${(p.co||[]).length})`],["quiz","📝 AI 퀴즈"]];
    $.innerHTML=apiBar+`
    <div class="topbar"><button class="btn-back" onclick="go({v:'home',part:null})">← 홈</button>
    <span style="font-size:16px">${p.i}</span>
    <div style="flex:1;min-width:0"><div style="font-size:9px;color:var(--ac);font-weight:600">제${p.id}과목</div><div style="font-size:14px;font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:'Noto Serif KR',serif">${esc(p.t)}</div></div>
    <button class="btn-tag" style="font-size:10px" onclick="toggleApi()">🔑</button></div>
    <div class="tabs">${tabs.map(([k,l])=>`<button style="padding:11px 14px;background:none;border:none;border-bottom:2.5px solid ${S.tab===k?'var(--ac)':'transparent'};color:${S.tab===k?'var(--acd)':'var(--tm)'};font-size:12px;cursor:pointer;white-space:nowrap;font-family:inherit;font-weight:${S.tab===k?'700':'500'};transition:all .15s" onclick="go({tab:'${k}',quiz:${k!=='quiz'?'null':'S.quiz'},qa:${k!=='quiz'?'{}':'S.qa'},qSub:${k!=='quiz'?'false':'S.qSub'}})">${l}</button>`).join("")}</div>
    <div class="content">${tabContent}</div>`;
    return;
  }

  // ── HOME ──
  $.innerHTML=apiBar+`
  <div class="hdr"><div class="hdr-in">
    <div style="display:flex;align-items:center;gap:8px;margin-bottom:4px;flex-wrap:wrap">
      <span style="font-size:20px">⚡</span>
      <span style="font-size:9px;color:var(--acd);background:var(--acg);padding:3px 9px;border-radius:10px;letter-spacing:1px;font-weight:600">전력거래사 학습가이드 v1 · Gemini Flash</span>
      <button class="btn-tag" style="margin-left:auto;font-size:10px;padding:4px 8px" onclick="toggleApi()">🔑 API</button>
    </div>
    <h1 style="font-size:19px;font-weight:800;margin:6px 0;line-height:1.3;font-family:'Noto Serif KR',serif;color:var(--t)">전력거래사 자격시험 학습 도우미</h1>
    <p style="color:var(--td);font-size:11px;margin:2px 0 0">용어 ${allT.length}개 · 5과목 · 용어 자동 링크 · AI 퀴즈 · 플래시카드</p>
    <div style="display:flex;justify-content:space-between;font-size:10px;color:var(--tm);margin-top:14px;font-weight:500"><span>과목 클리어</span><span style="color:var(--acd);font-weight:700">${doneN}/5 (${prog}%)</span></div>
    <div class="prog-bar"><div class="prog-fill" style="width:${prog}%"></div></div>
  </div></div>
  <div class="content">
    <div class="tool-grid">
      ${[{l:"📖 용어 사전",v:"glossary",n:allT.length+"개"},{l:"🃏 플래시카드",v:"fc",n:"암기 모드"},{l:"📊 비교표",v:"compare",n:COMPS.length+"개"}].map(b=>`<button class="tool-btn" onclick="${b.v==='fc'?'go({fcMode:true,fc:0,fcFlip:false})':`go({v:'${b.v}',sq:'',gf:'all',df:0})`}">
        <div class="tool-emoji">${b.l.split(" ")[0]}</div>
        <div class="tool-label">${b.l.split(" ").slice(1).join(" ")}</div>
        <div class="tool-sub">${b.n}</div>
      </button>`).join("")}
    </div>
    <div style="display:flex;flex-direction:column;gap:8px">
      ${PARTS.map(p=>{
        const ok=S.done[p.id];
        return `<div class="card part-card" ${ok?`style="border-color:var(--g);background:var(--gbg)"`:""} onclick="go({v:'part',part:${p.id},tab:'terms',exp:{},quiz:null,qa:{},qSub:false,qScore:null})">
          <div class="part-icon">${p.i}</div>
          <div style="flex:1;min-width:0">
            <div style="display:flex;align-items:center;gap:5px;flex-wrap:wrap;margin-bottom:2px">
              <span style="font-size:9px;color:var(--ac)">제${p.id}과목</span>
              <span style="font-size:9px;color:var(--tm)">${p.h}</span>
              ${ok?'<span style="font-size:9px;color:var(--g);background:var(--gd);padding:2px 7px;border-radius:8px;font-weight:600">CLEAR ✓</span>':""}
            </div>
            <div style="font-size:13px;font-weight:700;margin-bottom:3px;font-family:\'Noto Serif KR\',serif">${esc(p.t)}</div>
            <div class="tag-row">${p.tm.slice(0,4).map(t=>`<span class="tag-sm">${esc(t.length>8?t.slice(0,8)+"…":t)}</span>`).join("")}${p.tm.length>4?`<span style="font-size:9px;color:var(--tm)">+${p.tm.length-4}</span>`:""}</div>
          </div>
          <div style="color:var(--tm);font-size:14px;flex-shrink:0;margin-top:6px">›</div>
        </div>`}).join("")}
    </div>
  </div>`;
}

function toggleApi(){S.apiShow=!S.apiShow;render();}
function saveApiKey(){
  const v=document.getElementById("akIn");if(!v)return;
  _apiKey=v.value.trim();
  try{localStorage.setItem("kpx_api_key",_apiKey);}catch(e){}
  const ok=document.getElementById("apiOk");if(ok){ok.style.display="inline";setTimeout(()=>ok.style.display="none",2000);}
}
function submitQuiz(){
  S.qSub=true;const quiz=S.quiz;if(!quiz)return;
  const sc=quiz.filter((q,i)=>S.qa[i]===q.a).length;
  S.qScore=sc;
  if(sc===quiz.length&&S.part)S.done[S.part]=true;
  render();
}

render();
</script>
</body>
</html>
